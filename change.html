<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå±</text></svg>">
    <title>BABY PHUM MACHINE</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
    background: url('https://i.ibb.co/Hf7VjRbp/desktop-wallpaper-milky-green-blurred-backgrounds-blur.jpg') center/cover fixed;
    min-height: 100vh;
    padding: 16px;
}

        .hamburger-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            z-index: 1001;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: all 0.3s;
        }

        .hamburger-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        }

.hamburger-line {
    width: 24px;
    height: 3px;
    background: #2E7D32;
    border-radius: 2px;
    transition: all 0.3s;
}

        .hamburger-btn.active .hamburger-line:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }

        .hamburger-btn.active .hamburger-line:nth-child(2) {
            opacity: 0;
        }

        .hamburger-btn.active .hamburger-line:nth-child(3) {
            transform: translateY(-8px) rotate(-45deg);
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: -400px;
            width: 400px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.2);
            border-right: 1px solid rgba(255, 255, 255, 0.3);
            z-index: 1000;
            transition: left 0.3s;
            overflow-y: auto;
        }

        .sidebar.open {
            left: 0;
        }

        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .sidebar-overlay.show {
            opacity: 1;
            pointer-events: auto;
        }

        .sidebar-content {
            padding: 80px 20px 20px 20px;
        }

        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 0 0 20px 0;
        }

        .sidebar-menu-item {
            padding: 16px;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            transition: all 0.3s;
            border: 2px solid transparent;
            position: relative;
        }

        .sidebar-menu-item:hover {
			background: linear-gradient(135deg, #C8E6C9 0%, #A5D6A7 100%);
			border-color: #4CAF50;
			transform: translateX(4px);
		}

        .sidebar-menu-item.active {
            background: linear-gradient(135deg, #2E7D32 0%, #1B5E20 100%);
            color: white;
        }

        .sidebar-section {
            display: none;
            animation: fadeIn 0.3s;
        }

        .sidebar-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .sidebar-header {
            font-size: 18px;
            font-weight: 700;
            color: #333;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 3px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .history-item {
            padding: 12px;
            background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
            border-radius: 12px;
            margin-bottom: 10px;
            border-left: 4px solid #4CAF50;
        }

        .fertilizer-item {
            padding: 12px;
            background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);
            border-radius: 12px;
            margin-bottom: 10px;
            border-left: 4px solid #FF9800;
        }

        .fertilizer-pond {
            font-size: 14px;
            font-weight: 700;
            color: #E65100;
            margin-bottom: 4px;
        }

        .fertilizer-date {
            font-size: 12px;
            color: #F57C00;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .fertilizer-time {
            font-size: 11px;
            color: #FB8C00;
            margin-top: 2px;
        }

        .history-pond {
            font-size: 14px;
            font-weight: 700;
            color: #2E7D32;
            margin-bottom: 4px;
        }

        .history-date {
            font-size: 12px;
            color: #558B2F;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .history-time {
            font-size: 11px;
            color: #689F38;
            margin-top: 2px;
        }

        .no-history {
            text-align: center;
            padding: 20px;
            color: #999;
            font-size: 13px;
        }

        .clear-history-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #FF5252 0%, #F44336 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 12px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .clear-history-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(244, 67, 54, 0.4);
        }

        .clear-history-btn:active {
            transform: translateY(0);
        }

        .control-item {
            margin-bottom: 16px;
        }

        .control-item .switch-item {
            margin-bottom: 0;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
        }

        .grow-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .grow-btn {
            padding: 14px 8px;
            background: linear-gradient(135deg, #00E676 0%, #00C853 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 16px rgba(0, 230, 118, 0.4);
            transition: all 0.3s;
            text-align: center;
        }

        .grow-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 230, 118, 0.5);
        }

        .grow-btn.growing {
            background: linear-gradient(135deg, #FFC107 0%, #FFA000 100%);
            box-shadow: 0 4px 16px rgba(255, 193, 7, 0.4);
        }

        .grow-status {
            font-size: 11px;
            opacity: 0.95;
            margin-top: 4px;
        }

        .timer-card {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .timer-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .timer-item {
            background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
            padding: 16px;
            border-radius: 12px;
            text-align: left;
            border: 2px solid #81C784;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .timer-item.inactive {
            background: linear-gradient(135deg, #F5F5F5 0%, #E0E0E0 100%);
            border-color: #BDBDBD;
        }

        .timer-label {
            font-size: 14px;
            font-weight: 700;
            color: #2E7D32;
            margin-bottom: 0;
        }

        .timer-item.inactive .timer-label {
            color: #757575;
        }

        .timer-info {
            flex: 1;
        }

        .timer-display {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timer-value {
            font-size: 20px;
            font-weight: 800;
            color: #1B5E20;
            margin-bottom: 0;
            line-height: 1;
        }

        .timer-item.inactive .timer-value {
            color: #9E9E9E;
        }

        .timer-unit {
            font-size: 10px;
            color: #558B2F;
            font-weight: 600;
        }

        .timer-item.inactive .timer-unit {
            color: #9E9E9E;
        }

        .timer-status {
            font-size: 11px;
            margin-top: 4px;
            padding: 4px 10px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 8px;
            font-weight: 600;
            white-space: nowrap;
        }

        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #F44336;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(244, 67, 54, 0.4);
            animation: pulse-notification 2s infinite;
        }

        @keyframes pulse-notification {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .alert-banner {
            background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);
            border: 2px solid #FF9800;
            border-radius: 12px;
            padding: 12px 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideIn 0.3s;
        }

        .alert-banner.harvest {
            background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
            border-color: #4CAF50;
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .alert-icon {
            font-size: 24px;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-size: 14px;
            font-weight: 700;
            color: #E65100;
            margin-bottom: 4px;
        }

        .alert-banner.harvest .alert-title {
            color: #2E7D32;
        }

        .alert-text {
            font-size: 12px;
            color: #F57C00;
        }

        .alert-banner.harvest .alert-text {
            color: #558B2F;
        }

        .alert-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #666;
            padding: 0;
            width: 24px;
            height: 24px;
        }

        .header {
            background: linear-gradient(135deg, rgba(46, 125, 50, 0.85) 0%, rgba(76, 175, 80, 0.85) 100%), 
                        url('https://i.ibb.co/MkmmJcxW/your-image.jpg') 0% center/cover no-repeat;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: white;
            padding: 24px;
            border-radius: 20px;
            margin-bottom: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
            min-height: 120px;
            background-size: cover;
            background-position: 0% center;
        }

        .header-title {
            font-size: 24px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }

        .header-status {
            font-size: 13px;
            opacity: 0.95;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
            z-index: 1;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            background: #81C784;
            border-radius: 50%;
            animation: pulse 2s infinite;
            box-shadow: 0 0 12px rgba(129, 199, 132, 0.8);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(0.9); }
        }

        .card {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .card-header {
            font-size: 16px;
            font-weight: 700;
            color: #333;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 3px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .temp-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .temp-item {
            background: linear-gradient(135deg, #66BB6A 0%, #4CAF50 100%);
            color: white;
            padding: 12px 8px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.35);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .temp-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.45);
        }

        .temp-label {
            font-size: 11px;
            opacity: 0.95;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .temp-value {
            font-size: 24px;
            font-weight: 800;
            line-height: 1;
            margin-bottom: 2px;
        }

        .temp-unit {
            font-size: 12px;
            opacity: 0.9;
            font-weight: 600;
        }.led-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: linear-gradient(135deg, #FAFAFA 0%, #F5F5F5 100%);
            border-radius: 12px;
            margin-bottom: 10px;
            border: 2px solid #E8E8E8;
            transition: all 0.3s;
        }

        .led-item:hover {
            border-color: #03A9F4;
            transform: translateX(4px);
        }

        .led-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .led-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #03A9F4;
            box-shadow: 0 0 20px rgba(3, 169, 244, 0.6), inset 0 2px 8px rgba(255, 255, 255, 0.3);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .led-circle.off {
            background: #E0E0E0;
            box-shadow: 0 0 0 rgba(0, 0, 0, 0.1), inset 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        #light-led-menu {
            background: #FDD835;
            box-shadow: 0 0 20px rgba(253, 216, 53, 0.8), inset 0 2px 8px rgba(255, 255, 255, 0.3);
        }

        #light-led-menu.off {
            background: #E0E0E0;
            box-shadow: 0 0 0 rgba(0, 0, 0, 0.1), inset 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        #oxygen-led-menu {
            background: #4CAF50;
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.8), inset 0 2px 8px rgba(255, 255, 255, 0.3);
        }

        #oxygen-led-menu.off {
            background: #E0E0E0;
            box-shadow: 0 0 0 rgba(0, 0, 0, 0.1), inset 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .led-circle::after {
            content: '';
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.8) 0%, transparent 70%);
            border-radius: 50%;
            animation: glow 2s infinite;
        }

        .led-circle.off::after {
            animation: none;
            opacity: 0.3;
        }

        @keyframes glow {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 0.4; }
        }

        .led-info {
            flex: 1;
        }

        .led-label {
            font-size: 15px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .led-status {
            font-size: 14px;
            font-weight: 700;
            color: #03A9F4;
            padding: 4px 12px;
            background: #E1F5FE;
            border-radius: 12px;
        }

        .led-status.off {
            color: #F44336;
            background: #FFEBEE;
        }

        .switch-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 18px;
            background: linear-gradient(135deg, #FFF8E1 0%, #FFECB3 100%);
            border-radius: 16px;
            margin-bottom: 12px;
            border: 2px solid #FFE082;
            transition: all 0.3s;
        }

        .switch-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 16px rgba(255, 193, 7, 0.3);
        }

        .switch-item.light {
            background: linear-gradient(135deg, #FFF9C4 0%, #FFF59D 100%);
            border-color: #FDD835;
        }

        .switch-item.oxygen {
            background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
            border-color: #81C784;
        }

        .switch-item.pump {
            background: linear-gradient(135deg, #E1F5FE 0%, #B3E5FC 100%);
            border-color: #81D4FA;
        }

        .switch-item.pump.disabled {
            background: linear-gradient(135deg, #F5F5F5 0%, #E0E0E0 100%);
            border-color: #BDBDBD;
            opacity: 0.6;
            cursor: not-allowed;
        }

        .switch-item.pump.disabled .toggle {
            cursor: not-allowed;
            opacity: 0.5;
        }

        .switch-left {
            display: flex;
            align-items: center;
            gap: 16px;
            flex: 1;
        }

        .switch-icon {
            font-size: 32px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .switch-info {
            flex: 1;
        }

        .switch-label {
            font-size: 16px;
            font-weight: 700;
            color: #333;
            margin-bottom: 4px;
        }

        .switch-pin {
            font-size: 11px;
            color: #666;
            font-family: 'Courier New', monospace;
        }

        .toggle {
            position: relative;
            width: 64px;
            height: 36px;
            background: #BDBDBD;
            border-radius: 18px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .toggle.active {
            background: #4CAF50;
        }

        .toggle.active.light {
            background: #FDD835;
        }

        .toggle.active.oxygen {
            background: #4CAF50;
        }

        .toggle.active.pump {
            background: #039BE5;
        }

        .toggle-thumb {
            position: absolute;
            top: 4px;
            left: 4px;
            width: 28px;
            height: 28px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .toggle.active .toggle-thumb {
            transform: translateX(28px);
        }

        .info-box {
            padding: 14px 16px;
            background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);
            border: 2px solid #FFB74D;
            border-radius: 12px;
            margin-top: 16px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .info-icon {
            font-size: 20px;
            flex-shrink: 0;
        }

        .info-text {
            font-size: 13px;
            color: #E65100;
            line-height: 1.5;
            font-weight: 500;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: white;
            font-size: 16px;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

.confirm-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    z-index: 9999;
    display: none;
    align-items: center;
    justify-content: center;
    animation: fadeIn 0.3s;
}

.confirm-overlay.show {
    display: flex;
}

.confirm-dialog {
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    border-radius: 24px;
    padding: 32px;
    max-width: 400px;
    width: 90%;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    transform: scale(0.9);
    opacity: 0;
    animation: popIn 0.3s forwards;
}

@keyframes popIn {
    to {
        transform: scale(1);
        opacity: 1;
    }
}

.confirm-icon {
    width: 64px;
    height: 64px;
    margin: 0 auto 20px;
    background: linear-gradient(135deg, #2E7D32 0%, #1B5E20 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    box-shadow: 0 8px 24px rgba(46, 125, 50, 0.4);
}

.confirm-icon.warning {
    background: linear-gradient(135deg, #FFC107 0%, #FFA000 100%);
    box-shadow: 0 8px 24px rgba(255, 193, 7, 0.4);
}

.confirm-icon.danger {
    background: linear-gradient(135deg, #FF5252 0%, #F44336 100%);
    box-shadow: 0 8px 24px rgba(244, 67, 54, 0.4);
}

.confirm-title {
    font-size: 22px;
    font-weight: 700;
    color: #333;
    text-align: center;
    margin-bottom: 12px;
}

.confirm-message {
    font-size: 15px;
    color: #666;
    text-align: center;
    line-height: 1.6;
    margin-bottom: 28px;
}

.confirm-buttons {
    display: flex;
    gap: 12px;
}

.confirm-btn {
    flex: 1;
    padding: 14px 24px;
    border: none;
    border-radius: 12px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.confirm-btn.cancel {
    background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
    color: #666;
}

.confirm-btn.cancel:hover {
    background: linear-gradient(135deg, #e8e8e8 0%, #d0d0d0 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.confirm-btn.confirm {
    background: linear-gradient(135deg, #2E7D32 0%, #1B5E20 100%);
    color: white;
}

.confirm-btn.confirm:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(46, 125, 50, 0.4);
}

.confirm-btn.danger {
    background: linear-gradient(135deg, #FF5252 0%, #F44336 100%);
    color: white;
}

.confirm-btn.danger:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(244, 67, 54, 0.4);
}

.confirm-btn:active {
    transform: translateY(0);
}

body.dark-mode {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
}

body.dark-mode .confirm-overlay {
    background: rgba(0, 0, 0, 0.8);
}

body.dark-mode .confirm-dialog {
    background: linear-gradient(135deg, #2a2a3e 0%, #1f1f2e 100%);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

body.dark-mode .confirm-title {
    color: #ffffff;
}

body.dark-mode .confirm-message {
    color: #b0b0b0;
}

body.dark-mode .confirm-btn.cancel {
    background: linear-gradient(135deg, #3a3a4e 0%, #2a2a3e 100%);
    color: #ffffff;
}

body.dark-mode .confirm-btn.cancel:hover {
    background: linear-gradient(135deg, #4a4a5e 0%, #3a3a4e 100%);
}

body.dark-mode .header {
    background: linear-gradient(135deg, rgba(46, 125, 50, 0.95) 0%, rgba(76, 175, 80, 0.95) 100%),
                url('https://i.ibb.co/MkmmJcxW/your-image.jpg') 0% center/cover no-repeat;
}

body.dark-mode .card,
body.dark-mode .timer-card {
    background: rgba(42, 42, 62, 0.85);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

body.dark-mode .card-header,
body.dark-mode .sidebar-header {
    color: #ffffff;
    border-bottom-color: rgba(255, 255, 255, 0.1);
}

body.dark-mode .sidebar {
    background: rgba(42, 42, 62, 0.98);
    border-right-color: rgba(255, 255, 255, 0.1);
}

body.dark-mode .sidebar-menu-item {
    background: linear-gradient(135deg, #2a2a3e 0%, #1f1f2e 100%);
    color: #ffffff;
}

body.dark-mode .sidebar-menu-item:hover {
    background: linear-gradient(135deg, #3a4a3e 0%, #2a3a2e 100%);
}

body.dark-mode .sidebar-menu-item.active {
    background: linear-gradient(135deg, #2E7D32 0%, #1B5E20 100%);
}

body.dark-mode .hamburger-btn {
    background: rgba(42, 42, 62, 0.95);
    border-color: rgba(255, 255, 255, 0.2);
}

body.dark-mode .hamburger-line {
    background: #81C784;
}

body.dark-mode .switch-label,
body.dark-mode .led-label,
body.dark-mode .timer-label {
    color: #ffffff;
}

body.dark-mode .switch-pin,
body.dark-mode .timer-unit {
    color: #b0b0b0;
}

body.dark-mode .info-box {
    background: linear-gradient(135deg, #3a3a2e 0%, #2a2a1e 100%);
    border-color: #FFB74D;
}

body.dark-mode .info-text {
    color: #FFD54F;
}

body.dark-mode .timer-item {
    background: linear-gradient(135deg, #3a4a3e 0%, #2a3a2e 100%);
    border-color: #4CAF50;
}

body.dark-mode .timer-item.inactive {
    background: linear-gradient(135deg, #2a2a3e 0%, #1f1f2e 100%);
    border-color: #555;
}

body.dark-mode .timer-value {
    color: #81C784;
}

body.dark-mode .timer-item.inactive .timer-value {
    color: #666;
}

body.dark-mode .grow-btn {
    box-shadow: 0 4px 16px rgba(0, 230, 118, 0.6);
}

body.dark-mode .grow-btn.growing {
    box-shadow: 0 4px 16px rgba(255, 193, 7, 0.6);
}

body.dark-mode .led-item {
    background: linear-gradient(135deg, #2a2a3e 0%, #1f1f2e 100%);
    border-color: rgba(255, 255, 255, 0.1);
}

body.dark-mode .led-status {
    background: rgba(3, 169, 244, 0.2);
    color: #4FC3F7;
}

body.dark-mode .led-status.off {
    background: rgba(244, 67, 54, 0.2);
    color: #EF5350;
}

body.dark-mode .switch-item {
    background: linear-gradient(135deg, #3a3a2e 0%, #2a2a1e 100%);
    border-color: rgba(255, 224, 130, 0.3);
}

body.dark-mode .switch-item.light {
    background: linear-gradient(135deg, #3a3a2e 0%, #2a2a1e 100%);
    border-color: rgba(253, 216, 53, 0.4);
}

body.dark-mode .switch-item.oxygen {
    background: linear-gradient(135deg, #2a3a2e 0%, #1a2a1e 100%);
    border-color: rgba(129, 199, 132, 0.4);
}

body.dark-mode .switch-item.pump {
    background: linear-gradient(135deg, #2a2a3e 0%, #1a1a2e 100%);
    border-color: rgba(129, 212, 250, 0.4);
}

body.dark-mode .temp-item {
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.5);
}

body.dark-mode .history-item,
body.dark-mode .fertilizer-item {
    background: linear-gradient(135deg, #2a3a2e 0%, #1a2a1e 100%);
}

body.dark-mode .no-history {
    color: #666;
}

.settings-item {
    padding: 16px;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 12px;
    margin-bottom: 10px;
    border: 2px solid #E8E8E8;
    transition: all 0.3s;
}

.settings-item:hover {
    border-color: #64B5F6;
    transform: translateX(4px);
}

.settings-item-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
}

.settings-item-left {
    display: flex;
    align-items: center;
    gap: 12px;
    flex: 1;
}

.settings-icon {
    font-size: 24px;
}

.settings-label {
    font-size: 15px;
    font-weight: 600;
    color: #333;
}

.settings-desc {
    font-size: 12px;
    color: #666;
    margin-top: 2px;
}

.settings-arrow {
    font-size: 18px;
    color: #999;
    transition: transform 0.3s;
}

.settings-item.expanded .settings-arrow {
    transform: rotate(90deg);
}

.settings-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
    margin-top: 0;
}

.settings-item.expanded .settings-content {
    max-height: 800px;
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.confirm-time-btn {
    width: 100%;
    padding: 14px 24px;
    background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%);
    color: white;
    border: none;
    border-radius: 12px;
    font-size: 15px;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 4px 16px rgba(76, 175, 80, 0.4);
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-top: 16px;
}

.confirm-time-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(76, 175, 80, 0.6);
}

.confirm-time-btn:active {
    transform: translateY(0);
}

body.dark-mode .confirm-time-btn {
    box-shadow: 0 4px 16px rgba(76, 175, 80, 0.6);
}

body.dark-mode .confirm-time-btn:hover {
    box-shadow: 0 6px 20px rgba(76, 175, 80, 0.8);
}

.settings-option {
    padding: 10px 12px;
    background: white;
    border-radius: 8px;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.settings-option-label {
    font-size: 14px;
    color: #555;
}

.settings-value {
    font-size: 13px;
    font-weight: 600;
    color: #2E7D32;
}

body.dark-mode .settings-item {
    background: linear-gradient(135deg, #2a2a3e 0%, #1f1f2e 100%);
    border-color: rgba(255, 255, 255, 0.1);
}

body.dark-mode .settings-item:hover {
    border-color: #64B5F6;
}

body.dark-mode .settings-label {
    color: #ffffff;
}

body.dark-mode .settings-desc {
    color: #b0b0b0;
}

body.dark-mode .settings-option {
    background: rgba(42, 42, 62, 0.5);
}

body.dark-mode .settings-option-label {
    color: #b0b0b0;
}

body.dark-mode .settings-content {
    border-top-color: rgba(255, 255, 255, 0.1);
}
    </style>
</head><body>
    <button class="hamburger-btn" id="hamburger-btn" onclick="toggleSidebar()">
        <div class="hamburger-line"></div>
        <div class="hamburger-line"></div>
        <div class="hamburger-line"></div>
    </button>

    <div class="sidebar-overlay" id="sidebar-overlay" onclick="toggleSidebar()"></div>

    <div class="sidebar" id="sidebar">
        <div class="sidebar-content">
            <ul class="sidebar-menu">
                <li class="sidebar-menu-item active" onclick="showSection('history')">
                    <span>üìã</span>
                    <span>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß</span>
                </li>
                <li class="sidebar-menu-item" onclick="showSection('fertilizer')">
                    <span>üåæ</span>
                    <span>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢</span>
                    <div class="notification-badge" id="fertilizer-badge" style="display: none;">0</div>
                </li>
                <li class="sidebar-menu-item" onclick="showSection('control')">
                    <span>üéÆ</span>
                    <span>‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</span>
                </li>
                <li class="sidebar-menu-item" onclick="showSection('settings')">
                    <span>‚öôÔ∏è</span>
                    <span>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
                </li>
            </ul>

            <!-- ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö -->
            <div class="sidebar-section active" id="section-history">
                <div class="sidebar-header">
                    <span>üìã</span>
                    <span>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß</span>
                </div>
                <div id="history-list">
                    <div class="no-history">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß</div>
                </div>
                <button class="clear-history-btn" onclick="clearHistory()">
                    <span>üóëÔ∏è</span>
                    <span>‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                </button>
            </div>

            <!-- ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢ -->
            <div class="sidebar-section" id="section-fertilizer">
                <div class="sidebar-header">
                    <span>üåæ</span>
                    <span>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢</span>
                </div>
                <div id="fertilizer-list">
                    <div class="no-history">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢</div>
                </div>
                <button class="clear-history-btn" onclick="clearFertilizerHistory()">
                    <span>üóëÔ∏è</span>
                    <span>‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                </button>
            </div>

            <!-- ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° -->
            <div class="sidebar-section" id="section-control">
                <div class="sidebar-header">
                    <span>üéÆ</span>
                    <span>‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</span>
                </div>
                
                <div class="switch-item light" style="margin-bottom: 12px;">
                    <div class="switch-left">
                        <div class="led-circle off" id="light-led-menu"></div>
                        <div class="switch-icon">üí°</div>
                        <div class="switch-info">
                            <div class="switch-label">‡πÑ‡∏ü</div>
                            <div class="switch-pin"><span id="light-mode-menu">Auto</span></div>
                        </div>
                    </div>
                    <div class="toggle light" id="light-toggle-menu" onclick="toggleLightMenu()" style="cursor: pointer;">
                        <div class="toggle-thumb"></div>
                    </div>
                </div>

                <div class="switch-item oxygen" style="margin-bottom: 12px;">
                    <div class="switch-left">
                        <div class="led-circle" id="oxygen-led-menu"></div>
                        <div class="switch-icon">üí®</div>
                        <div class="switch-info">
                            <div class="switch-label">‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡πÄ‡∏à‡∏ô</div>
                            <div class="switch-pin"><span id="oxygen-mode-menu">Auto</span></div>
                        </div>
                    </div>
                    <div class="toggle oxygen active" id="oxygen-toggle-menu" onclick="toggleOxygenMenu()" style="cursor: pointer;">
                        <div class="toggle-thumb"></div>
                    </div>
                </div>
            </div>

            <!-- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ -->
            <div class="sidebar-section" id="section-settings">
                <div class="sidebar-header">
                    <span>‚öôÔ∏è</span>
                    <span>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
                </div>
                
                <!-- ‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î -->
                <div class="switch-item" style="margin-bottom: 12px; background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); border-color: #64B5F6;">
                    <div class="switch-left">
                        <div class="switch-icon">üåô</div>
                        <div class="switch-info">
                            <div class="switch-label">‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î</div>
                            <div class="switch-pin">Dark Mode</div>
                        </div>
                    </div>
                    <div class="toggle" id="darkmode-toggle" onclick="toggleDarkMode()" style="cursor: pointer;">
                        <div class="toggle-thumb">üåô</div>
                    </div>
                </div>

                <!-- ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -->
                <div class="settings-item" onclick="toggleSettingsItem(this)">
                    <div class="settings-item-header">
                        <div class="settings-item-left">
                            <div class="settings-icon">üîî</div>
                            <div>
                                <div class="settings-label">‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</div>
                                <div class="settings-desc">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ</div>
                            </div>
                        </div>
                        <div class="settings-arrow">‚Ä∫</div>
                    </div>
                    <div class="settings-content">
                        <div class="settings-option">
                            <span class="settings-option-label">‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</span>
                            <div class="toggle" id="sound-toggle" onclick="event.stopPropagation(); toggleSound();" style="cursor: pointer;">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                        <div class="settings-option">
                            <span class="settings-option-label">üîî Web Notification</span>
                            <div class="toggle" id="web-notif-toggle" onclick="event.stopPropagation(); toggleWebNotification();" style="cursor: pointer;">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                        <div class="settings-option">
                            <span class="settings-option-label">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß</span>
                            <div class="toggle active" id="harvest-notif-toggle" onclick="event.stopPropagation(); toggleHarvestNotif();" style="cursor: pointer;">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                        <div class="settings-option">
                            <span class="settings-option-label">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢</span>
                            <div class="toggle active" id="fertilizer-notif-toggle" onclick="event.stopPropagation(); toggleFertilizerNotif();" style="cursor: pointer;">
                                <div class="toggle-thumb"></div>
                            </div>
                        </div>
                        <div style="margin-top: 12px; padding: 10px; background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); border-radius: 8px; font-size: 11px; color: #1976D2; line-height: 1.6;">
                            üí° <strong>Web Notification</strong> ‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏°‡πâ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå)
                        </div>
                    </div>
					<div class="settings-option">
						<span class="settings-option-label">üîî ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</span>
						<button onclick="testNotification()" style="padding: 8px 16px; background: #4CAF50; color: white; border: none; border-radius: 8px; cursor: pointer;">‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
					</div>
                </div>

<!-- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ -->
<div class="settings-item" onclick="toggleSettingsItem(this)">
    <div class="settings-item-header">
        <div class="settings-item-left">
            <div class="settings-icon">‚è±Ô∏è</div>
            <div>
                <div class="settings-label">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤</div>
                <div class="settings-desc">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢</div>
            </div>
        </div>
        <div class="settings-arrow">‚Ä∫</div>
    </div>
    <div class="settings-content">
        <!-- ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß -->
        <div style="margin-bottom: 16px; padding: 12px; background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); border-radius: 10px; border: 2px solid #4CAF50;">
            <div style="font-size: 14px; font-weight: 700; color: #2E7D32; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                <span>üå±</span>
                <span>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß</span>
            </div>
            <div class="settings-option" style="background: white; margin-bottom: 8px;">
                <span class="settings-option-label">üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</span>
                <select id="harvest-days" 
                       onclick="event.stopPropagation();"
                       style="padding: 6px 12px; border: 2px solid #4CAF50; border-radius: 8px; font-weight: 600; color: #2E7D32; font-size: 14px; background: white; cursor: pointer;">
                    <option value="0">0 ‡∏ß‡∏±‡∏ô</option>
                    <option value="1">1 ‡∏ß‡∏±‡∏ô</option>
                    <option value="2">2 ‡∏ß‡∏±‡∏ô</option>
                    <option value="3">3 ‡∏ß‡∏±‡∏ô</option>
                    <option value="4">4 ‡∏ß‡∏±‡∏ô</option>
                    <option value="5">5 ‡∏ß‡∏±‡∏ô</option>
                    <option value="6">6 ‡∏ß‡∏±‡∏ô</option>
                    <option value="7" selected>7 ‡∏ß‡∏±‡∏ô</option>
                    <option value="8">8 ‡∏ß‡∏±‡∏ô</option>
                    <option value="9">9 ‡∏ß‡∏±‡∏ô</option>
                    <option value="10">10 ‡∏ß‡∏±‡∏ô</option>
                    <option value="11">11 ‡∏ß‡∏±‡∏ô</option>
                    <option value="12">12 ‡∏ß‡∏±‡∏ô</option>
                    <option value="13">13 ‡∏ß‡∏±‡∏ô</option>
                    <option value="14">14 ‡∏ß‡∏±‡∏ô</option>
                    <option value="15">15 ‡∏ß‡∏±‡∏ô</option>
                    <option value="16">16 ‡∏ß‡∏±‡∏ô</option>
                    <option value="17">17 ‡∏ß‡∏±‡∏ô</option>
                    <option value="18">18 ‡∏ß‡∏±‡∏ô</option>
                    <option value="19">19 ‡∏ß‡∏±‡∏ô</option>
                    <option value="20">20 ‡∏ß‡∏±‡∏ô</option>
                    <option value="21">21 ‡∏ß‡∏±‡∏ô</option>
                    <option value="22">22 ‡∏ß‡∏±‡∏ô</option>
                    <option value="23">23 ‡∏ß‡∏±‡∏ô</option>
                    <option value="24">24 ‡∏ß‡∏±‡∏ô</option>
                    <option value="25">25 ‡∏ß‡∏±‡∏ô</option>
                    <option value="26">26 ‡∏ß‡∏±‡∏ô</option>
                    <option value="27">27 ‡∏ß‡∏±‡∏ô</option>
                    <option value="28">28 ‡∏ß‡∏±‡∏ô</option>
                    <option value="29">29 ‡∏ß‡∏±‡∏ô</option>
                    <option value="30">30 ‡∏ß‡∏±‡∏ô</option>
                </select>
            </div>
            <div class="settings-option" style="background: white;">
                <span class="settings-option-label">üïê ‡πÄ‡∏ß‡∏•‡∏≤</span>
                <select id="harvest-time" 
                       onclick="event.stopPropagation();"
                       style="padding: 6px 12px; border: 2px solid #4CAF50; border-radius: 8px; font-weight: 600; color: #2E7D32; font-size: 14px; background: white; cursor: pointer;">
                    <option value="00:00">00:00</option>
                    <option value="01:00">01:00</option>
                    <option value="02:00">02:00</option>
                    <option value="03:00">03:00</option>
                    <option value="04:00">04:00</option>
                    <option value="05:00">05:00</option>
                    <option value="06:00">06:00</option>
                    <option value="07:00">07:00</option>
                    <option value="08:00">08:00</option>
                    <option value="09:00">09:00</option>
                    <option value="10:00">10:00</option>
                    <option value="11:00">11:00</option>
                    <option value="12:00" selected>12:00</option>
                    <option value="13:00">13:00</option>
                    <option value="14:00">14:00</option>
                    <option value="15:00">15:00</option>
                    <option value="16:00">16:00</option>
                    <option value="17:00">17:00</option>
                    <option value="18:00">18:00</option>
                    <option value="19:00">19:00</option>
                    <option value="20:00">20:00</option>
                    <option value="21:00">21:00</option>
                    <option value="22:00">22:00</option>
                    <option value="23:00">23:00</option>
                </select>
                <span style="color: #2E7D32; font-weight: 600; margin-left: 4px;">‡∏ô.</span>
            </div>
            <div style="margin-top: 8px; padding: 8px; background: rgba(255, 255, 255, 0.7); border-radius: 6px; font-size: 11px; color: #2E7D32;">
                üí°  ‡∏ô‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏π‡∏Å‡πÑ‡∏õ‡∏≠‡∏µ‡∏Å <strong id="harvest-example-days">7</strong> ‡∏ß‡∏±‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤ <strong id="harvest-example-time">12:00</strong> ‡∏ô.
            </div>
        </div>

        <!-- ‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢ -->
        <div style="padding: 12px; background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); border-radius: 10px; border: 2px solid #FF9800; margin-bottom: 16px;">
            <div style="font-size: 14px; font-weight: 700; color: #E65100; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                <span>üåæ</span>
                <span>‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢</span>
            </div>
            <div class="settings-option" style="background: white; margin-bottom: 8px;">
                <span class="settings-option-label">üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</span>
                <select id="fertilizer-days" 
                       onclick="event.stopPropagation();"
                       style="padding: 6px 12px; border: 2px solid #FF9800; border-radius: 8px; font-weight: 600; color: #E65100; font-size: 14px; background: white; cursor: pointer;">
                    <option value="0">0 ‡∏ß‡∏±‡∏ô</option>
                    <option value="1">1 ‡∏ß‡∏±‡∏ô</option>
                    <option value="2">2 ‡∏ß‡∏±‡∏ô</option>
                    <option value="3">3 ‡∏ß‡∏±‡∏ô</option>
                    <option value="4">4 ‡∏ß‡∏±‡∏ô</option>
                    <option value="5">5 ‡∏ß‡∏±‡∏ô</option>
                    <option value="6">6 ‡∏ß‡∏±‡∏ô</option>
                    <option value="7" selected>7 ‡∏ß‡∏±‡∏ô</option>
                    <option value="8">8 ‡∏ß‡∏±‡∏ô</option>
                    <option value="9">9 ‡∏ß‡∏±‡∏ô</option>
                    <option value="10">10 ‡∏ß‡∏±‡∏ô</option>
                    <option value="11">11 ‡∏ß‡∏±‡∏ô</option>
                    <option value="12">12 ‡∏ß‡∏±‡∏ô</option>
                    <option value="13">13 ‡∏ß‡∏±‡∏ô</option>
                    <option value="14">14 ‡∏ß‡∏±‡∏ô</option>
                    <option value="15">15 ‡∏ß‡∏±‡∏ô</option>
                    <option value="16">16 ‡∏ß‡∏±‡∏ô</option>
                    <option value="17">17 ‡∏ß‡∏±‡∏ô</option>
                    <option value="18">18 ‡∏ß‡∏±‡∏ô</option>
                    <option value="19">19 ‡∏ß‡∏±‡∏ô</option>
                    <option value="20">20 ‡∏ß‡∏±‡∏ô</option>
                    <option value="21">21 ‡∏ß‡∏±‡∏ô</option>
                    <option value="22">22 ‡∏ß‡∏±‡∏ô</option>
                    <option value="23">23 ‡∏ß‡∏±‡∏ô</option>
                    <option value="24">24 ‡∏ß‡∏±‡∏ô</option>
                    <option value="25">25 ‡∏ß‡∏±‡∏ô</option>
                    <option value="26">26 ‡∏ß‡∏±‡∏ô</option>
                    <option value="27">27 ‡∏ß‡∏±‡∏ô</option>
                    <option value="28">28 ‡∏ß‡∏±‡∏ô</option>
                    <option value="29">29 ‡∏ß‡∏±‡∏ô</option>
                    <option value="30">30 ‡∏ß‡∏±‡∏ô</option>
                </select>
            </div>
            <div class="settings-option" style="background: white;">
                <span class="settings-option-label">üïê ‡πÄ‡∏ß‡∏•‡∏≤</span>
                <select id="fertilizer-time" 
                       onclick="event.stopPropagation();"
                       style="padding: 6px 12px; border: 2px solid #FF9800; border-radius: 8px; font-weight: 600; color: #E65100; font-size: 14px; background: white; cursor: pointer;">
                    <option value="00:00">00:00</option>
                    <option value="01:00">01:00</option>
                    <option value="02:00">02:00</option>
                    <option value="03:00">03:00</option>
                    <option value="04:00">04:00</option>
                    <option value="05:00">05:00</option>
                    <option value="06:00">06:00</option>
                    <option value="07:00">07:00</option>
                    <option value="08:00">08:00</option>
                    <option value="09:00">09:00</option>
                    <option value="10:00">10:00</option>
                    <option value="11:00">11:00</option>
                    <option value="12:00" selected>12:00</option>
                    <option value="13:00">13:00</option>
                    <option value="14:00">14:00</option>
                    <option value="15:00">15:00</option>
                    <option value="16:00">16:00</option>
                    <option value="17:00">17:00</option>
                    <option value="18:00">18:00</option>
                    <option value="19:00">19:00</option>
                    <option value="20:00">20:00</option>
                    <option value="21:00">21:00</option>
                    <option value="22:00">22:00</option>
                    <option value="23:00">23:00</option>
                </select>
                <span style="color: #E65100; font-weight: 600; margin-left: 4px;">‡∏ô.</span>
            </div>
            <div style="margin-top: 8px; padding: 8px; background: rgba(255, 255, 255, 0.7); border-radius: 6px; font-size: 11px; color: #E65100;">
                üí°  ‡∏ô‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡πÑ‡∏õ‡∏≠‡∏µ‡∏Å <strong id="fertilizer-example-days">7</strong> ‡∏ß‡∏±‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤ <strong id="fertilizer-example-time">12:00</strong> ‡∏ô.
            </div>
        </div>

        <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô -->
        <button class="confirm-time-btn" onclick="event.stopPropagation(); confirmTimeSettings();">
            <span>‚úì</span>
            <span>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
        </button>
    </div>
</div>
</div>
</div>

                <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö -->
                <div class="settings-item" onclick="toggleSettingsItem(this)">
                    <div class="settings-item-header">
                        <div class="settings-item-left">
                            <div class="settings-icon">üìä</div>
                            <div>
                                <div class="settings-label">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö</div>
                                <div class="settings-desc">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏≠‡∏õ</div>
                            </div>
                        </div>
                        <div class="settings-arrow">‚Ä∫</div>
                    </div>
                    <div class="settings-content">
                        <div class="settings-option">
                            <span class="settings-option-label">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô</span>
                            <span class="settings-value">v1.0.0</span>
                        </div>
                        <div class="settings-option">
                            <span class="settings-option-label">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</span>
                            <span class="settings-value" id="connection-status">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...</span>
                        </div>
                        <div class="settings-option">
                            <span class="settings-option-label">‡πÇ‡∏´‡∏°‡∏î</span>
                            <span class="settings-value" id="mode-status">‡∏õ‡∏Å‡∏ï‡∏¥</span>
                        </div>
                    </div>
                </div>

                <!-- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
                <div class="settings-item" onclick="toggleSettingsItem(this)">
                    <div class="settings-item-header">
                        <div class="settings-item-left">
                            <div class="settings-icon">üóëÔ∏è</div>
                            <div>
                                <div class="settings-label">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
                                <div class="settings-desc">‡∏•‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
                            </div>
                        </div>
                        <div class="settings-arrow">‚Ä∫</div>
                    </div>
                    <div class="settings-content">
                        <button class="clear-history-btn" onclick="event.stopPropagation(); resetAllData();" style="margin-top: 0;">
                            <span>üîÑ</span>
                            <span>‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Confirm Dialog -->
    <div class="confirm-overlay" id="confirm-overlay">
        <div class="confirm-dialog">
            <div class="confirm-icon" id="confirm-icon">‚ùì</div>
            <div class="confirm-title" id="confirm-title">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</div>
            <div class="confirm-message" id="confirm-message">‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</div>
            <div class="confirm-buttons">
                <button class="confirm-btn cancel" id="confirm-cancel">
                    <span>‚úï</span>
                    <span>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</span>
                </button>
                <button class="confirm-btn confirm" id="confirm-confirm">
                    <span>‚úì</span>
                    <span>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</span>
                </button>
            </div>
        </div>
    </div>

    <div id="loading" class="loading">
        <div class="spinner"></div>
        ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Blynk...
    </div>

    <div id="app" class="container" style="display: none;">
        <div class="header">
            <div class="header-title">
                <span>üå±</span>
                <span>BABY PHUM MACHINE</span>
            </div>
            <div class="header-status">
                <div class="status-dot"></div>
                <span>Online &bull; <span id="current-time"></span></span>
            </div>
        </div>

        <div id="alert-container"></div>
        
        <div class="card">
            <div class="card-header">
                <span>üå±</span>
                <span>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å</span>
            </div>
            
            <div class="grow-buttons">
                <button class="grow-btn" id="grow-btn-1" onclick="toggleGrowing(1)">
                    <div>üå± ‡∏Å‡∏£‡∏∞‡∏ö‡∏∞ 1</div>
                    <div class="grow-status" id="grow-status-1">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å</div>
                </button>
                <button class="grow-btn" id="grow-btn-2" onclick="toggleGrowing(2)">
                    <div>üå± ‡∏Å‡∏£‡∏∞‡∏ö‡∏∞ 2</div>
                    <div class="grow-status" id="grow-status-2">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å</div>
                </button>
                <button class="grow-btn" id="grow-btn-3" onclick="toggleGrowing(3)">
                    <div>üå± ‡∏Å‡∏£‡∏∞‡∏ö‡∏∞ 3</div>
                    <div class="grow-status" id="grow-status-3">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å</div>
                </button>
            </div>
        </div>
        
        <div class="timer-card">
            <div class="card-header">
                <span>‚è±Ô∏è</span>
                <span>‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å</span>
            </div>
            <div class="timer-grid">
                <div class="timer-item inactive" id="timer-item-1">
                    <div class="timer-label">‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà 1</div>
                    <div class="timer-value" id="timer-value-1">00:00:00</div>
                    <div class="timer-unit">‡∏ß‡∏±‡∏ô:‡∏ä‡∏°.:‡∏ô‡∏≤‡∏ó‡∏µ</div>
                    <div class="timer-status" id="timer-status-1">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°</div>
                </div>
                <div class="timer-item inactive" id="timer-item-2">
                    <div class="timer-label">‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà 2</div>
                    <div class="timer-value" id="timer-value-2">00:00:00</div>
                    <div class="timer-unit">‡∏ß‡∏±‡∏ô:‡∏ä‡∏°.:‡∏ô‡∏≤‡∏ó‡∏µ</div>
                    <div class="timer-status" id="timer-status-2">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°</div>
                </div>
                <div class="timer-item inactive" id="timer-item-3">
                    <div class="timer-label">‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà 3</div>
                    <div class="timer-value" id="timer-value-3">00:00:00</div>
                    <div class="timer-unit">‡∏ß‡∏±‡∏ô:‡∏ä‡∏°.:‡∏ô‡∏≤‡∏ó‡∏µ</div>
                    <div class="timer-status" id="timer-status-3">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <span>üå°Ô∏è</span>
                <span>‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ô‡πâ‡∏≥</span>
            </div>
            <div class="temp-grid">
                <div class="temp-item">
                    <div class="temp-label">‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà 1</div>
                    <div class="temp-value" id="temp1">--</div>
                    <div class="temp-unit">&deg;C</div>
                </div>
                <div class="temp-item">
                    <div class="temp-label">‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà 2</div>
                    <div class="temp-value" id="temp2">--</div>
                    <div class="temp-unit">&deg;C</div>
                </div>
                <div class="temp-item">
                    <div class="temp-label">‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà 3</div>
                    <div class="temp-value" id="temp3">--</div>
                    <div class="temp-unit">&deg;C</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <span>üíß</span>
                <span>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥</span>
            </div>
            <div class="led-item">
                <div class="led-left">
                    <div class="led-circle" id="water1-led"></div>
                    <div class="led-info">
                        <div class="led-label">‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà 1</div>
                    </div>
                </div>
                <div class="led-status" id="water1-status">‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πá‡∏°</div>
            </div>
            <div class="led-item">
                <div class="led-left">
                    <div class="led-circle" id="water2-led"></div>
                    <div class="led-info">
                        <div class="led-label">‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà 2</div>
                    </div>
                </div>
                <div class="led-status" id="water2-status">‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πá‡∏°</div>
            </div>
            <div class="led-item">
                <div class="led-left">
                    <div class="led-circle" id="water3-led"></div>
                    <div class="led-info">
                        <div class="led-label">‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà 3</div>
                    </div>
                </div>
                <div class="led-status" id="water3-status">‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πá‡∏°</div>
            </div>
            <div class="led-item">
                <div class="led-left">
                    <div class="led-circle" id="water4-led"></div>
                    <div class="led-info">
                        <div class="led-label">ü™£ ‡∏ñ‡∏±‡∏á‡∏û‡∏±‡∏Å‡∏ô‡πâ‡∏≥</div>
                    </div>
                </div>
                <div class="led-status" id="water4-status">‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πá‡∏°</div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <span>üö∞</span>
                <span>‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß</span>
            </div>

            <div class="switch-item pump">
                <div class="switch-left">
                    <div class="switch-icon">üíß</div>
                    <div class="switch-info">
                        <div class="switch-label">‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà 1</div>
                        <div class="switch-pin"><span id="pump1-mode">Auto</span></div>
                    </div>
                </div>
                <div class="toggle pump" id="pump1-toggle" onclick="togglePump(1)">
                    <div class="toggle-thumb"></div>
                </div>
            </div>

            <div class="switch-item pump">
                <div class="switch-left">
                    <div class="switch-icon">üíß</div>
                    <div class="switch-info">
                        <div class="switch-label">‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà 2</div>
                        <div class="switch-pin"><span id="pump2-mode">Auto</span></div>
                    </div>
                </div>
                <div class="toggle pump" id="pump2-toggle" onclick="togglePump(2)">
                    <div class="toggle-thumb"></div>
                </div>
            </div>

            <div class="switch-item pump">
                <div class="switch-left">
                    <div class="switch-icon">üíß</div>
                    <div class="switch-info">
                        <div class="switch-label">‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà 3</div>
                        <div class="switch-pin"><span id="pump3-mode">Auto</span></div>
                    </div>
                </div>
                <div class="toggle pump" id="pump3-toggle" onclick="togglePump(3)">
                    <div class="toggle-thumb"></div>
                </div>
            </div>

            <div class="info-box">
                <div class="info-icon">‚ö†Ô∏è</div>
                <div class="info-text">‡∏Ç‡∏ì‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡πÑ‡∏Ç‡πà‡∏ú‡∏≥‡∏Ñ‡∏ß‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤</div>
            </div>
        </div>
    </div>

    <script>const BLYNK_SERVER = 'https://blynk.cloud';
        const BLYNK_AUTH = '4HB3ZavD44G28VPxLkuk8l5xyv-yEqrg';
        
        let emergencyStop = false;
        let harvestHistory = [];
        let fertilizerHistory = [];
        let demoMode = false;
        let waterStatus = { 1: false, 2: false, 3: false, 4: false };
        let growingStatus = { 
            1: { active: false, startTime: null, minutes: 0, harvestTime: null },
            2: { active: false, startTime: null, minutes: 0, harvestTime: null },
            3: { active: false, startTime: null, minutes: 0, harvestTime: null }
        };
        let notifications = {
            harvest: [],
            fertilizer: []
        };
        let darkMode = false;
		let currentTemperatures = {
		1: null,
		2: null,
		3: null
		};
		let temperatureWarnings = {
		1: { shown: false, lastTemp: null },
		2: { shown: false, lastTemp: null },
		3: { shown: false, lastTemp: null }
		};

        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        let notificationSettings = {
            sound: false,
            harvest: true,
            fertilizer: true,
            webNotification: false
        };

        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤
        let timeSettings = {
            harvestDays: 7,
            harvestTime: '12:00',
            fertilizerDays: 7,
            fertilizerTime: '12:00'
        };

        // ‡∏£‡∏∞‡∏ö‡∏ö Web Notification
        let notificationPermission = 'default';

        // ‡∏Ç‡∏≠‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Web Notification
        async function requestNotificationPermission() {
            if (!('Notification' in window)) {
                console.log('‚ùå ‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Web Notification');
                return false;
            }
            
            if (Notification.permission === 'granted') {
                notificationPermission = 'granted';
                return true;
            }
            
            if (Notification.permission !== 'denied') {
                const permission = await Notification.requestPermission();
                notificationPermission = permission;
                return permission === 'granted';
            }
            
            return false;
        }

        // ‡∏™‡πà‡∏á Web Notification
        function sendWebNotification(title, message, icon = 'üå±') {
            if (!notificationSettings.webNotification) return;
            if (notificationPermission !== 'granted') return;
            
            try {
                const notification = new Notification(title, {
                    body: message,
                    icon: `data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>${icon}</text></svg>`,
                    badge: `data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå±</text></svg>`,
                    tag: 'baby-phum-notification',
                    requireInteraction: true,
                    vibrate: [200, 100, 200]
                });
                
                notification.onclick = function() {
                    window.focus();
                    notification.close();
                };
                
                console.log('‚úÖ ‡∏™‡πà‡∏á Web Notification:', title);
            } catch (error) {
                console.error('‚ùå ‡∏™‡πà‡∏á Web Notification ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', error);
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î
        function toggleDarkMode() {
            darkMode = !darkMode;
            const body = document.body;
            const toggle = document.getElementById('darkmode-toggle');
            const thumb = toggle.querySelector('.toggle-thumb');
            
            if (darkMode) {
                body.classList.add('dark-mode');
                toggle.classList.add('active');
                thumb.textContent = '‚òÄÔ∏è';
                localStorage.setItem('darkMode', 'enabled');
                console.log('üåô ‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î: ‡πÄ‡∏õ‡∏¥‡∏î');
            } else {
                body.classList.remove('dark-mode');
                toggle.classList.remove('active');
                thumb.textContent = 'üåô';
                localStorage.setItem('darkMode', 'disabled');
                console.log('‚òÄÔ∏è ‡πÇ‡∏´‡∏°‡∏î‡∏™‡∏ß‡πà‡∏≤‡∏á: ‡πÄ‡∏õ‡∏¥‡∏î');
            }
        }

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î
        function loadDarkMode() {
            const savedMode = localStorage.getItem('darkMode');
            if (savedMode === 'enabled') {
                darkMode = true;
                document.body.classList.add('dark-mode');
                const toggle = document.getElementById('darkmode-toggle');
                if (toggle) {
                    toggle.classList.add('active');
                    const thumb = toggle.querySelector('.toggle-thumb');
                    if (thumb) thumb.textContent = '‚òÄÔ∏è';
                }
            }
        }

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        function loadNotificationSettings() {
            const saved = localStorage.getItem('notificationSettings');
            if (saved) {
                notificationSettings = JSON.parse(saved);
                
                const soundToggle = document.getElementById('sound-toggle');
                const harvestToggle = document.getElementById('harvest-notif-toggle');
                const fertilizerToggle = document.getElementById('fertilizer-notif-toggle');
                const webNotifToggle = document.getElementById('web-notif-toggle');
                
                if (soundToggle) {
                    soundToggle.classList.toggle('active', notificationSettings.sound);
                }
                if (harvestToggle) {
                    harvestToggle.classList.toggle('active', notificationSettings.harvest);
                }
                if (fertilizerToggle) {
                    fertilizerToggle.classList.toggle('active', notificationSettings.fertilizer);
                }
                if (webNotifToggle) {
                    webNotifToggle.classList.toggle('active', notificationSettings.webNotification);
                }
            }
            
            if ('Notification' in window) {
                notificationPermission = Notification.permission;
            }
        }



        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
        function saveNotificationSettings() {
            localStorage.setItem('notificationSettings', JSON.stringify(notificationSettings));
        }

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
function updateExampleText() {
    const harvestDays = document.getElementById('harvest-days').value;
    const harvestTime = document.getElementById('harvest-time').value;
    const fertilizerDays = document.getElementById('fertilizer-days').value;
    const fertilizerTime = document.getElementById('fertilizer-time').value;
    
    document.getElementById('harvest-example-days').textContent = harvestDays;
    document.getElementById('harvest-example-time').textContent = harvestTime;
    document.getElementById('fertilizer-example-days').textContent = fertilizerDays;
    document.getElementById('fertilizer-example-time').textContent = fertilizerTime;
}

// ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà)
function loadTimeSettings() {
    const saved = localStorage.getItem('timeSettings');
    if (saved) {
        timeSettings = JSON.parse(saved);
        
        const harvestDaysInput = document.getElementById('harvest-days');
        const harvestTimeInput = document.getElementById('harvest-time');
        const fertilizerDaysInput = document.getElementById('fertilizer-days');
        const fertilizerTimeInput = document.getElementById('fertilizer-time');
        
        if (harvestDaysInput) harvestDaysInput.value = timeSettings.harvestDays;
        if (harvestTimeInput) harvestTimeInput.value = timeSettings.harvestTime;
        if (fertilizerDaysInput) fertilizerDaysInput.value = timeSettings.fertilizerDays;
        if (fertilizerTimeInput) fertilizerTimeInput.value = timeSettings.fertilizerTime;
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
        updateExampleText();
    }
}
function saveTimeSettings() {
    localStorage.setItem('timeSettings', JSON.stringify(timeSettings));
    console.log('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤:', timeSettings);
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
function updateExampleText() {
    const harvestDays = document.getElementById('harvest-days').value;
    const harvestTime = document.getElementById('harvest-time').value;
    const fertilizerDays = document.getElementById('fertilizer-days').value;
    const fertilizerTime = document.getElementById('fertilizer-time').value;
    
    document.getElementById('harvest-example-days').textContent = harvestDays;
    document.getElementById('harvest-example-time').textContent = harvestTime;
    document.getElementById('fertilizer-example-days').textContent = fertilizerDays;
    document.getElementById('fertilizer-example-time').textContent = fertilizerTime;
}

// ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤
function loadTimeSettings() {
    const saved = localStorage.getItem('timeSettings');
    if (saved) {
        timeSettings = JSON.parse(saved);
        
        const harvestDaysInput = document.getElementById('harvest-days');
        const harvestTimeInput = document.getElementById('harvest-time');
        const fertilizerDaysInput = document.getElementById('fertilizer-days');
        const fertilizerTimeInput = document.getElementById('fertilizer-time');
        
        if (harvestDaysInput) harvestDaysInput.value = timeSettings.harvestDays;
        if (harvestTimeInput) harvestTimeInput.value = timeSettings.harvestTime;
        if (fertilizerDaysInput) fertilizerDaysInput.value = timeSettings.fertilizerDays;
        if (fertilizerTimeInput) fertilizerTimeInput.value = timeSettings.fertilizerTime;
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
        updateExampleText();
    }
}

// ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤
async function confirmTimeSettings() {
    const harvestDays = parseInt(document.getElementById('harvest-days').value);
    const harvestTime = document.getElementById('harvest-time').value;
    const fertilizerDays = parseInt(document.getElementById('fertilizer-days').value);
    const fertilizerTime = document.getElementById('fertilizer-time').value;
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
    if (isNaN(harvestDays) || harvestDays < 0 || harvestDays > 30) {
        alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 0-30 ‡∏ß‡∏±‡∏ô');
        return;
    }
    
    if (isNaN(fertilizerDays) || fertilizerDays < 0 || fertilizerDays > 30) {
        alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 0-30 ‡∏ß‡∏±‡∏ô');
        return;
    }
    
    // ‡πÅ‡∏™‡∏î‡∏á Confirm Dialog
    const confirmed = await showConfirm(
        '‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤',
        `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n\n` +
        `üå± ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß: ‡∏ô‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏π‡∏Å‡πÑ‡∏õ‡∏≠‡∏µ‡∏Å ${harvestDays} ‡∏ß‡∏±‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤ ${harvestTime} ‡∏ô.\n` +
        `üåæ ‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢: ‡∏ô‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡πÑ‡∏õ‡∏≠‡∏µ‡∏Å ${fertilizerDays} ‡∏ß‡∏±‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤ ${fertilizerTime} ‡∏ô.`,
        { icon: '‚úÖ', type: 'normal' }
    );
    
    if (confirmed) {
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
        timeSettings.harvestDays = harvestDays;
        timeSettings.harvestTime = harvestTime;
        timeSettings.fertilizerDays = fertilizerDays;
        timeSettings.fertilizerTime = fertilizerTime;
        
        saveTimeSettings();
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
        updateExampleText();
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
        console.log('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', timeSettings);
        
        // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
        if (notificationSettings.sound) {
            playNotificationSound();
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        const container = document.getElementById('alert-container');
        const alertId = `alert-success-${Date.now()}`;
        
        const alertHtml = `
            <div class="alert-banner harvest" id="${alertId}" style="animation: slideIn 0.3s;">
                <div class="alert-icon">‚úÖ</div>
                <div class="alert-content">
                    <div class="alert-title">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</div>
                    <div class="alert-text">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</div>
                </div>
                <button class="alert-close" onclick="document.getElementById('${alertId}').remove()">√ó</button>
            </div>
        `;
        
        container.insertAdjacentHTML('beforeend', alertHtml);
        
        // ‡∏•‡∏ö alert ‡∏´‡∏•‡∏±‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        setTimeout(() => {
            const alert = document.getElementById(alertId);
            if (alert) {
                alert.style.animation = 'slideIn 0.3s reverse';
                setTimeout(() => alert.remove(), 300);
            }
        }, 3000);
    }
}

// ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤ (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà)


        // ‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        function toggleSound() {
            notificationSettings.sound = !notificationSettings.sound;
            const toggle = document.getElementById('sound-toggle');
            toggle.classList.toggle('active');
            saveNotificationSettings();
            
            if (notificationSettings.sound) {
                playNotificationSound();
            }
            
            console.log('üîî ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:', notificationSettings.sound ? '‡πÄ‡∏õ‡∏¥‡∏î' : '‡∏õ‡∏¥‡∏î');
        }

        async function toggleWebNotification() {
            notificationSettings.webNotification = !notificationSettings.webNotification;
            const toggle = document.getElementById('web-notif-toggle');
            
            if (notificationSettings.webNotification) {
                const granted = await requestNotificationPermission();
                
                if (granted) {
                    toggle.classList.add('active');
                    saveNotificationSettings();
                    
                    sendWebNotification(
                        '‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î Web Notification ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
                        '‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏°‡πâ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß',
                        '‚úÖ'
                    );
                    console.log('üîî Web Notification: ‡πÄ‡∏õ‡∏¥‡∏î');
                } else {
                    notificationSettings.webNotification = false;
                    toggle.classList.remove('active');
                    alert('‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î Web Notification ‡πÑ‡∏î‡πâ\n\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå');
                }
            } else {
                toggle.classList.remove('active');
                saveNotificationSettings();
                console.log('üîï Web Notification: ‡∏õ‡∏¥‡∏î');
            }
        }

        function toggleHarvestNotif() {
            notificationSettings.harvest = !notificationSettings.harvest;
            const toggle = document.getElementById('harvest-notif-toggle');
            toggle.classList.toggle('active');
            saveNotificationSettings();
            console.log('üå± ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß:', notificationSettings.harvest ? '‡πÄ‡∏õ‡∏¥‡∏î' : '‡∏õ‡∏¥‡∏î');
        }

        function toggleFertilizerNotif() {
            notificationSettings.fertilizer = !notificationSettings.fertilizer;
            const toggle = document.getElementById('fertilizer-notif-toggle');
            toggle.classList.toggle('active');
            saveNotificationSettings();
            console.log('üåæ ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢:', notificationSettings.fertilizer ? '‡πÄ‡∏õ‡∏¥‡∏î' : '‡∏õ‡∏¥‡∏î');
        }

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏ó‡∏ô (‡∏ï‡∏£‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î loadDarkMode())
async function confirmTimeSettings() {
    const harvestDays = parseInt(document.getElementById('harvest-days').value);
    const harvestTime = document.getElementById('harvest-time').value;
    const fertilizerDays = parseInt(document.getElementById('fertilizer-days').value);
    const fertilizerTime = document.getElementById('fertilizer-time').value;
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
    if (isNaN(harvestDays) || harvestDays < 0 || harvestDays > 30) {
        alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 0-30 ‡∏ß‡∏±‡∏ô');
        return;
    }
    
    if (isNaN(fertilizerDays) || fertilizerDays < 0 || fertilizerDays > 30) {
        alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 0-30 ‡∏ß‡∏±‡∏ô');
        return;
    }
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
    const timeRegex = /^([0-1][0-9]|2[0-3]):[0-5][0-9]$/;
    if (!timeRegex.test(harvestTime)) {
        alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö HH:MM (‡πÄ‡∏ä‡πà‡∏ô 14:30)');
        return;
    }
    
    if (!timeRegex.test(fertilizerTime)) {
        alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö HH:MM (‡πÄ‡∏ä‡πà‡∏ô 14:30)');
        return;
    }
    
    // ‡πÅ‡∏™‡∏î‡∏á Confirm Dialog
    const confirmed = await showConfirm(
        '‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤',
        `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n\n` +
        `üå± ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß: ${harvestDays} ‡∏ß‡∏±‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤ ${harvestTime} ‡∏ô.\n` +
        `üåæ ‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢: ${fertilizerDays} ‡∏ß‡∏±‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤ ${fertilizerTime} ‡∏ô.`,
        { icon: '‚úÖ', type: 'normal' }
    );
    
    if (confirmed) {
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
        timeSettings.harvestDays = harvestDays;
        timeSettings.harvestTime = harvestTime;
        timeSettings.fertilizerDays = fertilizerDays;
        timeSettings.fertilizerTime = fertilizerTime;
        
        saveTimeSettings();
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
        console.log('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', timeSettings);
        
        // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
        if (notificationSettings.sound) {
            playNotificationSound();
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        const container = document.getElementById('alert-container');
        const alertId = `alert-success-${Date.now()}`;
        
        const alertHtml = `
            <div class="alert-banner harvest" id="${alertId}" style="animation: slideIn 0.3s;">
                <div class="alert-icon">‚úÖ</div>
                <div class="alert-content">
                    <div class="alert-title">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</div>
                    <div class="alert-text">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</div>
                </div>
                <button class="alert-close" onclick="document.getElementById('${alertId}').remove()">√ó</button>
            </div>
        `;
        
        container.insertAdjacentHTML('beforeend', alertHtml);
        
        // ‡∏•‡∏ö alert ‡∏´‡∏•‡∏±‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        setTimeout(() => {
            const alert = document.getElementById(alertId);
            if (alert) {
                alert.style.animation = 'slideIn 0.3s reverse';
                setTimeout(() => alert.remove(), 300);
            }
        }, 3000);
    }
}
        // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        function playNotificationSound() {
            if (notificationSettings.sound) {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 800;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            }
        }

        // ‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á Settings Item
        function toggleSettingsItem(element) {
            element.classList.toggle('expanded');
        }

        // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        async function resetAllData() {
            const confirmed = await showConfirm(
                '‚ö†Ô∏è ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
                '‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n\n‚Ä¢ ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß\n‚Ä¢ ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢\n‚Ä¢ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å\n‚Ä¢ ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ',
                { icon: '‚ö†Ô∏è', type: 'danger', confirmType: 'danger' }
            );
            
            if (confirmed) {
                localStorage.removeItem('harvestHistory');
                localStorage.removeItem('fertilizerHistory');
                localStorage.removeItem('growingStatus');
                localStorage.removeItem('notificationSettings');
                localStorage.removeItem('darkMode');
                localStorage.removeItem('timeSettings');
                
                console.log('üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                
                alert('‚úÖ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à\n\n‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö');
                location.reload();
            }
        }

        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
        function updateConnectionStatus() {
            const statusEl = document.getElementById('connection-status');
            const modeEl = document.getElementById('mode-status');
            
            if (statusEl) {
                if (demoMode) {
                    statusEl.textContent = 'Demo Mode';
                    statusEl.style.color = '#FFA000';
                } else {
                    statusEl.textContent = '‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß';
                    statusEl.style.color = '#2E7D32';
                }
            }
            
            if (modeEl) {
                modeEl.textContent = demoMode ? '‡∏ó‡∏î‡∏™‡∏≠‡∏ö' : '‡∏õ‡∏Å‡∏ï‡∏¥';
                modeEl.style.color = demoMode ? '#FFA000' : '#2E7D32';
            }
        }

        // Custom Confirm Dialog
        function showConfirm(title, message, options = {}) {
            return new Promise((resolve) => {
                const overlay = document.getElementById('confirm-overlay');
                const icon = document.getElementById('confirm-icon');
                const titleEl = document.getElementById('confirm-title');
                const messageEl = document.getElementById('confirm-message');
                const cancelBtn = document.getElementById('confirm-cancel');
                const confirmBtn = document.getElementById('confirm-confirm');
                
                icon.textContent = options.icon || '‚ùì';
                icon.className = 'confirm-icon';
                if (options.type === 'warning') icon.classList.add('warning');
                if (options.type === 'danger') icon.classList.add('danger');
                
                titleEl.textContent = title;
                messageEl.textContent = message;
                
                confirmBtn.className = 'confirm-btn confirm';
                if (options.confirmType === 'danger') {
                    confirmBtn.classList.remove('confirm');
                    confirmBtn.classList.add('danger');
                }
                
                overlay.classList.add('show');
                
                const handleConfirm = () => {
                    overlay.classList.remove('show');
                    cleanup();
                    resolve(true);
                };
                
                const handleCancel = () => {
                    overlay.classList.remove('show');
                    cleanup();
                    resolve(false);
                };
                
                const cleanup = () => {
                    confirmBtn.removeEventListener('click', handleConfirm);
                    cancelBtn.removeEventListener('click', handleCancel);
                    overlay.removeEventListener('click', handleOverlayClick);
                };
                
                const handleOverlayClick = (e) => {
                    if (e.target === overlay) handleCancel();
                };
                
                confirmBtn.addEventListener('click', handleConfirm);
                cancelBtn.addEventListener('click', handleCancel);
                overlay.addEventListener('click', handleOverlayClick);
            });
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        function showAlert(type, pondNum, message) {
            if (type === 'harvest' && !notificationSettings.harvest) return;
            if (type === 'fertilizer' && !notificationSettings.fertilizer) return;
            
            const container = document.getElementById('alert-container');
            const alertId = `alert-${type}-${pondNum}-${Date.now()}`;
            
            const alertHtml = `
                <div class="alert-banner ${type}" id="${alertId}">
                    <div class="alert-icon">${type === 'harvest' ? 'üå±' : 'üåæ'}</div>
                    <div class="alert-content">
                        <div class="alert-title">${type === 'harvest' ? '‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß!' : '‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢!'}</div>
                        <div class="alert-text">${message}</div>
                    </div>
                    <button class="alert-close" onclick="closeAlert('${alertId}', '${type}', ${pondNum})">√ó</button>
                </div>
            `;
            
            container.insertAdjacentHTML('beforeend', alertHtml);
            
            playNotificationSound();
            
            const title = type === 'harvest' ? 'üå± ‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß!' : 'üåæ ‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢!';
            const icon = type === 'harvest' ? 'üå±' : 'üåæ';
            sendWebNotification(title, message, icon);
            
            if (type === 'fertilizer') {
                notifications.fertilizer.push({ pondNum, time: Date.now() });
                updateFertilizerBadge();
            }
        }
// ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô closeAlert() ‡πÄ‡∏î‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ
function closeAlert(alertId, type, pondNum) {
    const alert = document.getElementById(alertId);
    if (alert) {
        alert.style.animation = 'slideIn 0.3s reverse';
        setTimeout(() => alert.remove(), 300);
    }
    
    if (type === 'fertilizer') {
        // ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
        addFertilizerRecord(pondNum);
        
        // ‚úÖ ‡∏•‡∏ö notification
        notifications.fertilizer = notifications.fertilizer.filter(n => n.pondNum !== pondNum);
        
        // ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
        saveNotificationState();
        
        // ‚úÖ ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó badge
        updateFertilizerBadge();
        
        console.log(`‚úÖ ‡∏õ‡∏¥‡∏î‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢‡∏Å‡∏£‡∏∞‡∏ö‡∏∞ ${pondNum}`);
    }
    
    if (type === 'harvest') {
        // ‚úÖ ‡∏•‡∏ö notification harvest (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
        notifications.harvest = notifications.harvest.filter(n => n !== pondNum);
        saveNotificationState();
        
        console.log(`‚úÖ ‡∏õ‡∏¥‡∏î‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏£‡∏∞‡∏ö‡∏∞ ${pondNum}`);
    }
}
        function updateFertilizerBadge() {
            const badge = document.getElementById('fertilizer-badge');
            const count = notifications.fertilizer.length;
            if (count > 0) {
                badge.textContent = count;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
// ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô checkNotifications() ‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
function checkNotifications() {
    const now = new Date();
	console.log('üîç ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô...', {
    ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: now.toLocaleString('th-TH'),
    ‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏π‡∏Å: Object.entries(growingStatus)
        .filter(([_, s]) => s.active)
        .map(([num, s]) => ({
            ‡∏Å‡∏£‡∏∞‡∏ö‡∏∞: num,
            ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠: new Date(s.startTime).toLocaleString('th-TH')
        }))
	});	
    const currentTime = now.getTime();
    
    for (let i = 1; i <= 3; i++) {
        const status = growingStatus[i];
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß
        if (status.active && status.startTime) {
            const startDate = new Date(status.startTime);
            const [targetHours, targetMinutes] = timeSettings.harvestTime.split(':').map(Number);
            const harvestDate = new Date(startDate);
            harvestDate.setDate(harvestDate.getDate() + timeSettings.harvestDays);
            harvestDate.setHours(targetHours, targetMinutes, 0, 0);
            
            const shouldNotify = currentTime >= harvestDate.getTime() && 
                               !notifications.harvest.includes(i);
            
            if (shouldNotify) {
                const elapsed = currentTime - status.startTime;
                const days = Math.floor(elapsed / (24 * 60 * 60 * 1000));
                const remainingHours = Math.floor((elapsed % (24 * 60 * 60 * 1000)) / (60 * 60 * 1000));
                const remainingMinutes = Math.floor((elapsed % (60 * 60 * 1000)) / (60 * 1000));
                
                console.log(`üîî [‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß] ‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${i} ‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß!`, {
                    ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å: startDate.toLocaleString('th-TH'),
                    ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: harvestDate.toLocaleString('th-TH'),
                    ‡∏õ‡∏•‡∏π‡∏Å‡∏°‡∏≤: `${days} ‡∏ß‡∏±‡∏ô ${remainingHours}:${String(remainingMinutes).padStart(2, '0')}`
                });
                
                showAlert('harvest', i, 
                    `‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${i} ‡∏õ‡∏•‡∏π‡∏Å‡∏°‡∏≤ ${days} ‡∏ß‡∏±‡∏ô ${remainingHours}:${String(remainingMinutes).padStart(2, '0')} ‡∏ô. ‡πÅ‡∏•‡πâ‡∏ß\n` +
                    `(‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ ${timeSettings.harvestDays} ‡∏ß‡∏±‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤ ${timeSettings.harvestTime} ‡∏ô.)`
                );
                
                notifications.harvest.push(i);
                saveNotificationState();
            }
        }
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢
        if (status.harvestTime) {
            const harvestDate = new Date(status.harvestTime);
            const [targetHours, targetMinutes] = timeSettings.fertilizerTime.split(':').map(Number);
            const fertilizerDate = new Date(harvestDate);
            fertilizerDate.setDate(fertilizerDate.getDate() + timeSettings.fertilizerDays);
            fertilizerDate.setHours(targetHours, targetMinutes, 0, 0);
            
            const alreadyNotified = notifications.fertilizer.some(n => n.pondNum === i);
            const shouldNotify = currentTime >= fertilizerDate.getTime() && !alreadyNotified;
            
            if (shouldNotify) {
                const elapsed = currentTime - status.harvestTime;
                const days = Math.floor(elapsed / (24 * 60 * 60 * 1000));
                const remainingHours = Math.floor((elapsed % (24 * 60 * 60 * 1000)) / (60 * 60 * 1000));
                const remainingMinutes = Math.floor((elapsed % (60 * 60 * 1000)) / (60 * 1000));
                
                console.log(`üîî [‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢] ‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${i} ‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß!`, {
                    ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß: harvestDate.toLocaleString('th-TH'),
                    ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: fertilizerDate.toLocaleString('th-TH'),
                    ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏°‡∏≤: `${days} ‡∏ß‡∏±‡∏ô ${remainingHours}:${String(remainingMinutes).padStart(2, '0')}`
                });
                
                showAlert('fertilizer', i, 
                    `‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${i} ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏°‡∏≤ ${days} ‡∏ß‡∏±‡∏ô ${remainingHours}:${String(remainingMinutes).padStart(2, '0')} ‡∏ô. ‡πÅ‡∏•‡πâ‡∏ß\n` +
                    `(‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ ${timeSettings.fertilizerDays} ‡∏ß‡∏±‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤ ${timeSettings.fertilizerTime} ‡∏ô.)`
                );
            }
        }
    }
}
function testNotification() {
    console.log('üîî ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô');
    playNotificationSound();
    sendWebNotification('üå± ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô', '‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥', '‚úÖ');
    showAlert('harvest', 1, '‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß');
}
// ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å/‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
function saveNotificationState() {
    localStorage.setItem('notificationState', JSON.stringify(notifications));
    console.log('üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:', {
        harvest: notifications.harvest,
        fertilizer: notifications.fertilizer.map(f => f.pondNum),
        total: notifications.harvest.length + notifications.fertilizer.length
    });
}

function loadNotificationState() {
    const saved = localStorage.getItem('notificationState');
    if (saved) {
        notifications = JSON.parse(saved);
        updateFertilizerBadge();
        console.log('üìÇ ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:', notifications);
    }
}
		// ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
        function addFertilizerRecord(pondNum) {
            const now = new Date();
            const months = ['‡∏°.‡∏Ñ.', '‡∏Å.‡∏û.', '‡∏°‡∏µ.‡∏Ñ.', '‡πÄ‡∏°.‡∏¢.', '‡∏û.‡∏Ñ.', '‡∏°‡∏¥.‡∏¢.', '‡∏Å.‡∏Ñ.', '‡∏™.‡∏Ñ.', '‡∏Å.‡∏¢.', '‡∏ï.‡∏Ñ.', '‡∏û.‡∏¢.', '‡∏ò.‡∏Ñ.'];
            
            const record = {
                pond: pondNum,
                date: `${now.getDate()} ${months[now.getMonth()]} ${now.getFullYear() + 543}`,
                time: `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')} ‡∏ô.`,
                timestamp: now.getTime()
            };
            
            fertilizerHistory.unshift(record);
            if (fertilizerHistory.length > 20) fertilizerHistory.pop();
            
            saveFertilizerHistory();
            displayFertilizerHistory();
            
            growingStatus[pondNum].harvestTime = null;
            saveGrowingData();
        }

        function displayFertilizerHistory() {
            const fertilizerList = document.getElementById('fertilizer-list');
            
            if (fertilizerHistory.length === 0) {
                fertilizerList.innerHTML = '<div class="no-history">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢</div>';
                return;
            }
            
            fertilizerList.innerHTML = fertilizerHistory.map(record => `
                <div class="fertilizer-item">
                    <div class="fertilizer-pond">üåæ ‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${record.pond}</div>
                    <div class="fertilizer-date">üìÖ ${record.date}</div>
                    <div class="fertilizer-time">üïê ${record.time}</div>
                </div>
            `).join('');
        }

        function loadFertilizerHistory() {
            const saved = localStorage.getItem('fertilizerHistory');
            if (saved) {
                fertilizerHistory = JSON.parse(saved);
                displayFertilizerHistory();
            }
        }

        function saveFertilizerHistory() {
            localStorage.setItem('fertilizerHistory', JSON.stringify(fertilizerHistory));
        }

        async function clearFertilizerHistory() {
            const confirmed = await showConfirm(
                'üóëÔ∏è ‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢',
                '‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?',
                { icon: 'üóëÔ∏è', type: 'danger', confirmType: 'danger' }
            );
            
            if (confirmed) {
                fertilizerHistory = [];
                saveFertilizerHistory();
                displayFertilizerHistory();
            }
        }

        function loadGrowingData() {
            const saved = localStorage.getItem('growingStatus');
            if (saved) {
                growingStatus = JSON.parse(saved);
                for (let i = 1; i <= 3; i++) {
                    if (growingStatus[i].active) {
                        updateGrowingUI(i, true);
                    }
                }
            }
        }

        function saveGrowingData() {
            localStorage.setItem('growingStatus', JSON.stringify(growingStatus));
        }

        function updateGrowingUI(pondNum, isGrowing) {
            console.log(`üå± Update UI Pond ${pondNum}:`, isGrowing ? 'GROWING' : 'STOPPED');
            
            const btn = document.getElementById(`grow-btn-${pondNum}`);
            const statusText = document.getElementById(`grow-status-${pondNum}`);
            const timerItem = document.getElementById(`timer-item-${pondNum}`);
            const timerStatus = document.getElementById(`timer-status-${pondNum}`);
            
            if (isGrowing) {
                btn.classList.add('growing');
                statusText.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏•‡∏π‡∏Å...';
                timerItem.classList.remove('inactive');
                timerStatus.textContent = 'üå± ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏•‡∏π‡∏Å';
            } else {
                btn.classList.remove('growing');
                statusText.textContent = '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å';
                timerItem.classList.add('inactive');
                timerStatus.textContent = '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°';
                document.getElementById(`timer-value-${pondNum}`).textContent = '00:00:00';
            }
            
            updatePumpButtonStatus(pondNum, waterStatus[pondNum]);
        }

        function updateGrowingTimers() {
            for (let i = 1; i <= 3; i++) {
                if (growingStatus[i].active && growingStatus[i].startTime) {
                    const elapsed = Date.now() - growingStatus[i].startTime;
                    const totalMinutes = Math.floor(elapsed / (1000 * 60));
                    const days = Math.floor(totalMinutes / (60 * 24));
                    const hours = Math.floor((totalMinutes % (60 * 24)) / 60);
                    const minutes = totalMinutes % 60;
                    
                    growingStatus[i].minutes = totalMinutes;
                    
                    const valueEl = document.getElementById(`timer-value-${i}`);
                    valueEl.textContent = `${String(days).padStart(2, '0')}:${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}`;
                }
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            const btn = document.getElementById('hamburger-btn');
            
            sidebar.classList.toggle('open');
            overlay.classList.toggle('show');
            btn.classList.toggle('active');
        }

        function showSection(sectionName) {
            document.querySelectorAll('.sidebar-section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.getElementById(`section-${sectionName}`).classList.add('active');
            
            document.querySelectorAll('.sidebar-menu-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.sidebar-menu-item').classList.add('active');
        }

        function syncControls(source, isActive, type) {
            if (type === 'light') {
                const menuToggle = document.getElementById('light-toggle-menu');
                const menuMode = document.getElementById('light-mode-menu');
                
                menuToggle.classList.toggle('active', isActive);
                menuMode.textContent = isActive ? 'Manual' : 'Auto';
} else if (type === 'oxygen') {
    const menuToggle = document.getElementById('oxygen-toggle-menu');
    const menuMode = document.getElementById('oxygen-mode-menu');
    
    menuToggle.classList.toggle('active', isActive);
    menuMode.textContent = isActive ? '‡πÄ‡∏õ‡∏¥‡∏î' : '‡∏õ‡∏¥‡∏î';  // ‚Üê ‡πÅ‡∏Å‡πâ‡πÄ‡∏õ‡πá‡∏ô "‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î"
}
		else if (type.startsWith('pump')) {
                const pumpNum = type.replace('pump', '');
                const mainToggle = document.getElementById(`pump${pumpNum}-toggle`);
                const mainMode = document.getElementById(`pump${pumpNum}-mode`);
                
                mainToggle.classList.toggle('active', isActive);
                mainMode.textContent = isActive ? '‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î' : 'Auto';
            }
        }

        function toggleLightMenu() {
            if (emergencyStop) return;
            
            const toggle = document.getElementById('light-toggle-menu');
            const menuMode = document.getElementById('light-mode-menu');
            
            toggle.classList.toggle('active');
            
            if (toggle.classList.contains('active')) {
                menuMode.textContent = 'Manual';
                sendToBlynk('V24', 1);
            } else {
                menuMode.textContent = 'Auto';
                sendToBlynk('V24', 0);
            }
            
            console.log('üí° ‡πÑ‡∏ü:', toggle.classList.contains('active') ? '‡πÄ‡∏õ‡∏¥‡∏î' : '‡∏õ‡∏¥‡∏î');
        }

        function toggleOxygenMenu() {
            if (emergencyStop) return;
            
            const toggle = document.getElementById('oxygen-toggle-menu');
            const menuMode = document.getElementById('oxygen-mode-menu');
            const isCurrentlyActive = toggle.classList.contains('active');
            
            toggle.classList.toggle('active');
            const newState = !isCurrentlyActive;
            
if (newState) {
    menuMode.textContent = '‡πÄ‡∏õ‡∏¥‡∏î';  // ‚Üê ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô "‡πÄ‡∏õ‡∏¥‡∏î"
    sendToBlynk('V25', 1);
    console.log('üí® ‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡πÄ‡∏à‡∏ô: ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î');  // ‚Üê ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà
} else {
    menuMode.textContent = '‡∏õ‡∏¥‡∏î';   // ‚Üê ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô "‡∏õ‡∏¥‡∏î"
    sendToBlynk('V25', 0);
    console.log('üí® ‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡πÄ‡∏à‡∏ô: ‡∏õ‡∏¥‡∏î');  // ‚Üê ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà
}
        }

        const demoData = {
            V2: 1,
            V5: 28.5,
            V6: 29.2,
            V7: 27.8,
            V15: 1,
            V16: 1,
            V17: 0,
            V0: 0,
            V1: 0,
        };

        async function clearHistory() {
            const confirmed = await showConfirm(
                'üóëÔ∏è ‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß',
                '‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?',
                { icon: 'üóëÔ∏è', type: 'danger', confirmType: 'danger' }
            );
            
            if (confirmed) {
                harvestHistory = [];
                saveHistory();
                displayHistory();
            }
        }

        function loadHistory() {
            const saved = localStorage.getItem('harvestHistory');
            if (saved) {
                harvestHistory = JSON.parse(saved);
                displayHistory();
            }
        }

        function saveHistory() {
            localStorage.setItem('harvestHistory', JSON.stringify(harvestHistory));
        }

        function addHarvestRecord(pondNum) {
            const now = new Date();
            const months = ['‡∏°.‡∏Ñ.', '‡∏Å.‡∏û.', '‡∏°‡∏µ.‡∏Ñ.', '‡πÄ‡∏°.‡∏¢.', '‡∏û.‡∏Ñ.', '‡∏°‡∏¥.‡∏¢.', '‡∏Å.‡∏Ñ.', '‡∏™.‡∏Ñ.', '‡∏Å.‡∏¢.', '‡∏ï.‡∏Ñ.', '‡∏û.‡∏¢.', '‡∏ò.‡∏Ñ.'];
            
            const record = {
                pond: pondNum,
                date: `${now.getDate()} ${months[now.getMonth()]} ${now.getFullYear() + 543}`,
                time: `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')} ‡∏ô.`,
                timestamp: now.getTime()
            };
            
            harvestHistory.unshift(record);
            if (harvestHistory.length > 20) harvestHistory.pop();
            
            saveHistory();
            displayHistory();
        }

        function displayHistory() {
            const historyList = document.getElementById('history-list');
            
            if (harvestHistory.length === 0) {
                historyList.innerHTML = '<div class="no-history">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö</div>';
                return;
            }
            
            historyList.innerHTML = harvestHistory.map(record => `
                <div class="history-item">
                    <div class="history-pond">üå± ‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${record.pond}</div>
                    <div class="history-date">üìÖ ${record.date}</div>
                    <div class="history-time">üïê ${record.time}</div>
                </div>
            `).join('');
        }

        function updateTime() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const timeEl = document.getElementById('current-time');
            if (timeEl) {
                timeEl.textContent = `${hours}:${minutes}`;
            }
        }

        async function fetchBlynkData() {
    try {
        const pins = ['V2', 'V5', 'V6', 'V7', 'V15', 'V16', 'V17', 'V24', 'V25', 'V10', 'V11', 'V12', 'V0', 'V1', 'V20', 'V21', 'V22'];
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏° timeout 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 5000);
        
        const response = await fetch(
            `${BLYNK_SERVER}/external/api/get?token=${BLYNK_AUTH}&${pins.join('&')}`,
            { 
                method: 'GET',
                signal: controller.signal
            }
        );
        
        clearTimeout(timeoutId);
        
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        
        const data = await response.json();
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏à‡∏£‡∏¥‡∏á
        if (!data || Object.keys(data).length === 0) {
            throw new Error('No data received');
        }
        
        // ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
        if (demoMode) {
            demoMode = false;
            console.log('‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Blynk ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
        }
        
        displayData(data);
        
    } catch (error) {
        console.error('‚ùå Error fetching Blynk data:', error.message);
        
        // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏Ç‡πâ‡∏≤ demo mode ‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏•‡∏¢
        if (!demoMode) {
            enterDemoMode();
        } else {
            // ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà demo mode ‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡πà‡∏°
            displayData(demoData);
        }
    }
}
        
		function enterDemoMode() {
    demoMode = true;
    console.log('‚ö†Ô∏è ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö (Demo Mode)');
    
    // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
    const loadingEl = document.getElementById('loading');
    if (loadingEl) {
        loadingEl.innerHTML = 
            '<div class="spinner"></div>' +
            '<div style="margin-top: 16px;">‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Blynk ‡πÑ‡∏î‡πâ</div>' +
            '<div style="font-size: 13px; opacity: 0.8; margin-top: 8px;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö...</div>';
    }
    
    // ‡∏£‡∏≠ 1.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
    setTimeout(() => {
        displayData(demoData);
        
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡πà‡∏°‡∏ó‡∏∏‡∏Å 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        setInterval(() => {
            demoData.V2 = Math.random() > 0.5 ? 1 : 0;
            demoData.V5 = (27 + Math.random() * 3).toFixed(1);
            demoData.V6 = (27 + Math.random() * 3).toFixed(1);
            demoData.V7 = (27 + Math.random() * 3).toFixed(1);
            demoData.V15 = Math.random() > 0.5 ? 1 : 0;
            demoData.V16 = Math.random() > 0.5 ? 1 : 0;
            demoData.V17 = Math.random() > 0.5 ? 1 : 0;
            demoData.V0 = Math.random() > 0.5 ? 1 : 0;
            demoData.V1 = Math.random() > 0.5 ? 1 : 0;
            displayData(demoData);
        }, 3000);
    }, 1500);
}

        function syncInitialState(data) {
            const lightManual = data.V24 == 1;
            const lightToggle = document.getElementById('light-toggle-menu');
            const lightMode = document.getElementById('light-mode-menu');
            
            if (lightToggle && lightMode) {
                lightToggle.classList.toggle('active', lightManual);
                lightMode.textContent = lightManual ? 'Manual' : 'Auto';
            }
            
            const oxygenOn = data.V25 == 1;
            const oxygenToggle = document.getElementById('oxygen-toggle-menu');
            const oxygenMode = document.getElementById('oxygen-mode-menu');
            
if (oxygenToggle && oxygenMode) {
    oxygenToggle.classList.toggle('active', oxygenOn);
    oxygenMode.textContent = oxygenOn ? '‡πÄ‡∏õ‡∏¥‡∏î' : '‡∏õ‡∏¥‡∏î';  // ‚Üê ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
}
            
            console.log('‚úÖ Synced initial state:', {
                lightManual,
                oxygenOn,
                growingStatus
            });
        }

function displayData(data) {
    // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥
    const temp1 = data.V5 !== undefined ? parseFloat(data.V5) : null;
    const temp2 = data.V6 !== undefined ? parseFloat(data.V6) : null;
    const temp3 = data.V7 !== undefined ? parseFloat(data.V7) : null;
    
    currentTemperatures[1] = temp1;
    currentTemperatures[2] = temp2;
    currentTemperatures[3] = temp3;
    
    document.getElementById('temp1').textContent = temp1 !== null ? temp1.toFixed(1) : '--';
    document.getElementById('temp2').textContent = temp2 !== null ? temp2.toFixed(1) : '--';
    document.getElementById('temp3').textContent = temp3 !== null ? temp3.toFixed(1) : '--';
    
    // ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°...
    updateWaterStatus(1, data.V17);
    updateWaterStatus(2, data.V16);
    updateWaterStatus(3, data.V15);
    updateWaterStatus(4, data.V2);
    
    updateLEDStatus(data);
    syncInitialState(data);
    document.getElementById('loading').style.display = 'none';
    document.getElementById('app').style.display = 'block';
    document.getElementById('sidebar').style.display = 'block';
    
    const statusText = document.querySelector('.header-status span');
    if (statusText && demoMode) {
        statusText.innerHTML = `<span style="color: #FDD835;">‚ö†Ô∏è ‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö</span> &bull; <span id="current-time"></span>`;
        updateTime();
    }
    updateConnectionStatus();
}
        function updateLEDStatus(data) {
            const lightLed = document.getElementById('light-led-menu');
            if (lightLed) {
                if (data.V0 == 1) {
                    lightLed.classList.remove('off');
                } else {
                    lightLed.classList.add('off');
                }
            }
            
            const oxygenLed = document.getElementById('oxygen-led-menu');
            if (oxygenLed) {
                if (data.V1 == 1) {
                    oxygenLed.classList.remove('off');
                } else {
                    oxygenLed.classList.add('off');
                }
            }
        }

        function updateWaterStatus(pondNum, value) {
            const hasWater = value == 1;
            waterStatus[pondNum] = hasWater;
            
            const led = document.getElementById(`water${pondNum}-led`);
            const status = document.getElementById(`water${pondNum}-status`);
            
            if (hasWater) {
                led.classList.remove('off');
                status.classList.remove('off');
                status.textContent = '‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πá‡∏°';
            } else {
                led.classList.add('off');
                status.classList.add('off');
                status.textContent = '‡πÑ‡∏°‡πà‡πÄ‡∏ï‡πá‡∏°';
            }
            
            if (pondNum <= 3) {
                updatePumpButtonStatus(pondNum, hasWater);
            }
        }

        function updatePumpButtonStatus(pondNum, hasWater) {
            const pumpItem = document.getElementById(`pump${pondNum}-toggle`).closest('.switch-item');
            const isGrowing = growingStatus[pondNum] && growingStatus[pondNum].active;
            
            if (hasWater && isGrowing) {
                pumpItem.classList.remove('disabled');
            } else {
                pumpItem.classList.add('disabled');
                const toggle = document.getElementById(`pump${pondNum}-toggle`);
                if (toggle.classList.contains('active')) {
                    toggle.classList.remove('active');
                    const mode = document.getElementById(`pump${pondNum}-mode`);
                    mode.textContent = 'Auto';
                    sendToBlynk(getPumpPin(pondNum), 0);
                }
            }
        }

        function getPumpPin(pondNum) {
            const pins = { 1: 'V12', 2: 'V11', 3: 'V10' };
            return pins[pondNum];
        }

        async function sendToBlynk(pin, value) {
            if (emergencyStop && value === 1) return false;
            if (demoMode) {
                console.log(`[Demo Mode] ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á ${pin} = ${value}`);
                return true;
            }
            
            try {
                const response = await fetch(
                    `${BLYNK_SERVER}/external/api/update?token=${BLYNK_AUTH}&${pin}=${value}`,
                    { method: 'GET' }
                );
                return response.ok;
            } catch (error) {
                console.error('Error sending to Blynk:', error);
                return false;
            }
        }

async function togglePump(pumpNum) {
            if (emergencyStop) return;
            
            const toggle = document.getElementById(`pump${pumpNum}-toggle`);
            const isActive = toggle.classList.contains('active');
            const pumpItem = toggle.closest('.switch-item');
            
            if (pumpItem.classList.contains('disabled') && !isActive) {
                if (!growingStatus[pumpNum].active) {
                    alert(`‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡πÑ‡∏î‡πâ\n\n‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${pumpNum} ‡∏Å‡πà‡∏≠‡∏ô`);
                } else if (!waterStatus[pumpNum]) {
                    alert(`‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡πÑ‡∏î‡πâ\n\n‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${pumpNum} ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ô‡πâ‡∏≥`);
                }
                return;
            }
            
            const pins = { 1: 'V12', 2: 'V11', 3: 'V10' };
            
            if (!isActive) {
                console.log(`üíß Pump ${pumpNum}: ‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏±‡πä‡∏°‡∏î‡∏π‡∏î‡∏ô‡πâ‡∏≥`);
                syncControls('main', true, `pump${pumpNum}`);
                await sendToBlynk(pins[pumpNum], 1);
            } else {
                console.log(`üíß Pump ${pumpNum}: ‡∏õ‡∏¥‡∏î‡∏õ‡∏±‡πä‡∏° + ‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å`);
                
                const confirmed = await showConfirm(
                    '‚úÖ ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
                    `‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${pumpNum} ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!\n\n‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥`,
                    { icon: '‚úÖ', type: 'normal' }
                );
                
                if (confirmed) {
                    // ‡∏õ‡∏¥‡∏î UI ‡∏Å‡πà‡∏≠‡∏ô
                    syncControls('main', false, `pump${pumpNum}`);
                    
                    // ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏õ‡∏¥‡∏î‡∏õ‡∏±‡πä‡∏°‡πÑ‡∏õ‡∏ó‡∏µ‡πà Arduino (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å!)
                    const success = await sendToBlynk(pins[pumpNum], 0);
                    console.log(`üì§ ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏õ‡∏¥‡∏î‡∏õ‡∏±‡πä‡∏° ${pumpNum} (${pins[pumpNum]} = 0):`, success ? '‚úÖ' : '‚ùå');
                    
                    // ‡∏£‡∏≠‡πÉ‡∏´‡πâ Arduino ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á
                    await new Promise(resolve => setTimeout(resolve, 500));
                    
                    if (success) {
                        addHarvestRecord(pumpNum);
                        
                        if (growingStatus[pumpNum].active) {
                            growingStatus[pumpNum].active = false;
                            growingStatus[pumpNum].startTime = null;
                            growingStatus[pumpNum].minutes = 0;
                            growingStatus[pumpNum].harvestTime = Date.now();
                            
                            updateGrowingUI(pumpNum, false);
                            saveGrowingData();
                            
                            const growPins = { 1: 'V20', 2: 'V21', 3: 'V22' };
                            await sendToBlynk(growPins[pumpNum], 0);
                            console.log(`üõë ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${pumpNum} (‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à)`);
                            
                            notifications.harvest = notifications.harvest.filter(n => n !== pumpNum);
                            saveNotificationState();
                        }
                        
                        const anyPondActive = Object.values(growingStatus).some(s => s.active);
                        if (!anyPondActive) {
                            const oxygenToggle = document.getElementById('oxygen-toggle-menu');
                            const oxygenMode = document.getElementById('oxygen-mode-menu');
if (oxygenToggle && oxygenMode) {
    oxygenToggle.classList.remove('active');
    oxygenMode.textContent = '‡∏õ‡∏¥‡∏î';  // ‚Üê ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô "‡∏õ‡∏¥‡∏î"
    sendToBlynk('V25', 0);
    console.log('üí® ‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡πÄ‡∏à‡∏ô: ‡∏õ‡∏¥‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥');
}
                        }
                    } else {
                        console.error('‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏õ‡∏¥‡∏î‡∏õ‡∏±‡πä‡∏°‡πÑ‡∏î‡πâ');
                        alert('‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î\n\n‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏õ‡∏¥‡∏î‡∏õ‡∏±‡πä‡∏°‡πÑ‡∏î‡πâ\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
                        // ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ UI ‡∏Å‡∏•‡∏±‡∏ö
                        toggle.classList.add('active');
                        const mode = document.getElementById(`pump${pumpNum}-mode`);
                        mode.textContent = '‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î';
                    }
                } else {
                    toggle.classList.add('active');
                    const mode = document.getElementById(`pump${pumpNum}-mode`);
                    mode.textContent = '‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î';
                }
            }
        }
// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥
function checkTemperature(pondNum) {
    const temp = currentTemperatures[pondNum];
    
    // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥
    if (temp === null || temp === undefined || isNaN(temp)) {
        return {
            isValid: false,
            message: `‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${pondNum} ‡πÑ‡∏î‡πâ\n\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥`
        };
    }
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡πà‡∏ß‡∏á‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥
    if (temp < 20) {
        return {
            isValid: false,
            message: `‚ö†Ô∏è ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ï‡πà‡∏≥‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ!\n\n‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${pondNum}: ${temp}¬∞C\n(‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 20¬∞C)\n\n‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å‡πÉ‡∏ô‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ï‡πà‡∏≥`
        };
    }
    
    if (temp > 28) {
        return {
            isValid: false,
            message: `‚ö†Ô∏è ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ!\n\n‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${pondNum}: ${temp}¬∞C\n(‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤ 28¬∞C)\n\n‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å‡πÉ‡∏ô‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏™‡∏π‡∏á`
        };
    }
    
    // ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏õ‡∏Å‡∏ï‡∏¥
    return {
        isValid: true,
        message: `‚úÖ ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°\n\n‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${pondNum}: ${temp}¬∞C`
    };
}
// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á Alert ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥
function showTemperatureAlert(pondNum, temp, type) {
    const container = document.getElementById('alert-container');
    const alertId = `temp-alert-${pondNum}`;
    
    // ‡∏•‡∏ö alert ‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
    const oldAlert = document.getElementById(alertId);
    if (oldAlert) {
        oldAlert.remove();
    }
    
    const isCold = type === 'cold';
    const bgColor = isCold 
        ? 'linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%)' 
        : 'linear-gradient(135deg, #FFEBEE 0%, #FFCDD2 100%)';
    const borderColor = isCold ? '#2196F3' : '#F44336';
    const icon = isCold ? '‚ùÑÔ∏è' : 'üî•';
    const title = isCold ? '‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ï‡πà‡∏≥' : '‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏™‡∏π‡∏á';
    const textColor = isCold ? '#1976D2' : '#C62828';
    
    const alertHtml = `
        <div class="alert-banner" id="${alertId}" style="background: ${bgColor}; border-color: ${borderColor}; animation: slideIn 0.3s;">
            <div class="alert-icon">${icon}</div>
            <div class="alert-content">
                <div class="alert-title" style="color: ${textColor};">${title} - ‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${pondNum}</div>
                <div class="alert-text" style="color: ${textColor};">
                    ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ${temp}¬∞C
                    ${isCold ? '(‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 20¬∞C)' : '(‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤ 28¬∞C)'}
                </div>
            </div>
            <button class="alert-close" onclick="document.getElementById('${alertId}').remove()">√ó</button>
        </div>
    `;
    
    container.insertAdjacentHTML('beforeend', alertHtml);
    
    // ‡∏•‡∏ö alert ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏á 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    setTimeout(() => {
        const alert = document.getElementById(alertId);
        if (alert) {
            alert.style.animation = 'slideIn 0.3s reverse';
            setTimeout(() => alert.remove(), 300);
        }
    }, 10000);
}
// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏Ç‡∏ì‡∏∞‡∏õ‡∏•‡∏π‡∏Å
function checkGrowingTemperatures() {
    for (let i = 1; i <= 3; i++) {
        // ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏•‡∏π‡∏Å‡∏≠‡∏¢‡∏π‡πà
        if (!growingStatus[i].active) {
            // ‡∏ñ‡πâ‡∏≤‡∏´‡∏¢‡∏∏‡∏î‡∏õ‡∏•‡∏π‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
            temperatureWarnings[i].shown = false;
            temperatureWarnings[i].lastTemp = null;
            continue;
        }
        
        const temp = currentTemperatures[i];
        
        // ‡∏Ç‡πâ‡∏≤‡∏°‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥
        if (temp === null || temp === undefined || isNaN(temp)) {
            continue;
        }
        
        const isOutOfRange = temp < 20 || temp > 28;
        const tempChanged = temperatureWarnings[i].lastTemp !== temp;
        
        // ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠: ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÅ‡∏•‡∏∞ (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡πÅ‡∏à‡πâ‡∏á ‡∏´‡∏£‡∏∑‡∏≠ ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)
        if (isOutOfRange && (!temperatureWarnings[i].shown || tempChanged)) {
            temperatureWarnings[i].shown = true;
            temperatureWarnings[i].lastTemp = temp;
            
            let warningMessage = '';
            let icon = 'üå°Ô∏è';
            
            if (temp < 20) {
                warningMessage = `‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${i}: ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ï‡πà‡∏≥ ${temp}¬∞C\n(‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 20¬∞C)\n\n‡∏≠‡∏≤‡∏à‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï`;
                icon = '‚ùÑÔ∏è';
            } else if (temp > 28) {
                warningMessage = `‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${i}: ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏™‡∏π‡∏á ${temp}¬∞C\n(‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤ 28¬∞C)\n\n‡∏≠‡∏≤‡∏à‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï`;
                icon = 'üî•';
            }
            
            console.log(`üå°Ô∏è [‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥] ${warningMessage}`);
            
            // ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏ö‡∏ö Alert Banner
            showTemperatureAlert(i, temp, temp < 20 ? 'cold' : 'hot');
            
            // ‡∏™‡πà‡∏á Web Notification
            if (notificationSettings.webNotification) {
                sendWebNotification(
                    `${icon} ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥!`,
                    warningMessage,
                    icon
                );
            }
            
            // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
            if (notificationSettings.sound) {
                playNotificationSound();
            }
        }
        
        // ‡∏ñ‡πâ‡∏≤‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
        if (!isOutOfRange && temperatureWarnings[i].shown) {
            temperatureWarnings[i].shown = false;
            console.log(`‚úÖ ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${i} ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥: ${temp}¬∞C`);
        }
    }
}
// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å/‡∏´‡∏¢‡∏∏‡∏î‡∏õ‡∏•‡∏π‡∏Å
// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å/‡∏´‡∏¢‡∏∏‡∏î‡∏õ‡∏•‡∏π‡∏Å
async function toggleGrowing(pondNum) {
    const status = growingStatus[pondNum];
    
    if (!status.active) {
        // ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å
        const tempCheck = checkTemperature(pondNum);
        
        if (!tempCheck.isValid) {
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
            const proceedAnyway = await showConfirm(
                '‚ö†Ô∏è ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°',
                tempCheck.message + '\n\n‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å‡∏ï‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?',
                { icon: '‚ö†Ô∏è', type: 'warning' }
            );
            
            if (!proceedAnyway) {
                console.log(`üå°Ô∏è ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${pondNum} - ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°`);
                return; // ‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å
            }
            
            console.log(`‚ö†Ô∏è ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° (‡∏Å‡∏£‡∏∞‡∏ö‡∏∞ ${pondNum})`);
        } else {
            console.log(`‚úÖ ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°: ${currentTemperatures[pondNum]}¬∞C`);
        }
        
        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å
        const confirmed = await showConfirm(
            'üå± ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å',
            `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${pondNum} ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`,
            { icon: 'üå±', type: 'normal' }
        );
        
        if (confirmed) {
            status.active = true;
            status.startTime = Date.now();
            status.minutes = 0;
            
            updateGrowingUI(pondNum, true);
            saveGrowingData();
            
            const growPins = { 1: 'V20', 2: 'V21', 3: 'V22' };
            await sendToBlynk(growPins[pondNum], 1);
            
            console.log(`üå± ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${pondNum} - ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥: ${currentTemperatures[pondNum]}¬∞C`);
            console.log(`üì§ ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏•‡∏π‡∏Å: ${growPins[pondNum]} = 1`);
        }
    } else {
        // ‡∏´‡∏¢‡∏∏‡∏î‡∏õ‡∏•‡∏π‡∏Å
        const confirmed = await showConfirm(
            '‚ö†Ô∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å',
            `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏¢‡∏∏‡∏î‡∏õ‡∏•‡∏π‡∏Å‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${pondNum} ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n\n‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏π‡∏Å‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å`,
            { icon: '‚ö†Ô∏è', type: 'warning', confirmType: 'danger' }
        );
        
        if (confirmed) {
            status.active = false;
            status.startTime = null;
            status.minutes = 0;
            
            updateGrowingUI(pondNum, false);
            saveGrowingData();
            
            const growPins = { 1: 'V20', 2: 'V21', 3: 'V22' };
            await sendToBlynk(growPins[pondNum], 0);
            
            console.log(`üõë ‡∏´‡∏¢‡∏∏‡∏î‡∏õ‡∏•‡∏π‡∏Å‡∏Å‡∏£‡∏∞‡∏ö‡∏∞‡∏ó‡∏µ‡πà ${pondNum}`);
            
            // ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
            notifications.harvest = notifications.harvest.filter(n => n !== pondNum);
            saveNotificationState();
        }
    }
}
// ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤
async function confirmTimeSettings() {
    const harvestDays = parseInt(document.getElementById('harvest-days').value);
    const harvestTime = document.getElementById('harvest-time').value;
    const fertilizerDays = parseInt(document.getElementById('fertilizer-days').value);
    const fertilizerTime = document.getElementById('fertilizer-time').value;
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
    if (isNaN(harvestDays) || harvestDays < 0 || harvestDays > 30) {
        alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 0-30 ‡∏ß‡∏±‡∏ô');
        return;
    }
    
    if (isNaN(fertilizerDays) || fertilizerDays < 0 || fertilizerDays > 30) {
        alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 0-30 ‡∏ß‡∏±‡∏ô');
        return;
    }
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
    const timeRegex = /^([0-1][0-9]|2[0-3]):[0-5][0-9]$/;
    if (!timeRegex.test(harvestTime)) {
        alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö HH:MM (‡πÄ‡∏ä‡πà‡∏ô 14:30)');
        return;
    }
    
    if (!timeRegex.test(fertilizerTime)) {
        alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö HH:MM (‡πÄ‡∏ä‡πà‡∏ô 14:30)');
        return;
    }
    
    // ‡πÅ‡∏™‡∏î‡∏á Confirm Dialog
    const confirmed = await showConfirm(
        '‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤',
        `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n\n` +
        `üå± ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß: ${harvestDays} ‡∏ß‡∏±‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤ ${harvestTime} ‡∏ô.\n` +
        `üåæ ‡πÉ‡∏™‡πà‡∏õ‡∏∏‡πã‡∏¢: ${fertilizerDays} ‡∏ß‡∏±‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤ ${fertilizerTime} ‡∏ô.`,
        { icon: '‚úÖ', type: 'normal' }
    );
    
    if (confirmed) {
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
        timeSettings.harvestDays = harvestDays;
        timeSettings.harvestTime = harvestTime;
        timeSettings.fertilizerDays = fertilizerDays;
        timeSettings.fertilizerTime = fertilizerTime;
        
        saveTimeSettings();
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
        console.log('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:', timeSettings);
        
        // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (optional)
        if (notificationSettings.sound) {
            playNotificationSound();
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        const container = document.getElementById('alert-container');
        const alertId = `alert-success-${Date.now()}`;
        
        const alertHtml = `
            <div class="alert-banner harvest" id="${alertId}" style="animation: slideIn 0.3s;">
                <div class="alert-icon">‚úÖ</div>
                <div class="alert-content">
                    <div class="alert-title">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</div>
                    <div class="alert-text">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</div>
                </div>
                <button class="alert-close" onclick="document.getElementById('${alertId}').remove()">√ó</button>
            </div>
        `;
        
        container.insertAdjacentHTML('beforeend', alertHtml);
        
        // ‡∏•‡∏ö alert ‡∏´‡∏•‡∏±‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        setTimeout(() => {
            const alert = document.getElementById(alertId);
            if (alert) {
                alert.style.animation = 'slideIn 0.3s reverse';
                setTimeout(() => alert.remove(), 300);
            }
        }, 3000);
    }
}
// ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö
loadDarkMode(); 
loadGrowingData();
loadHistory();
loadFertilizerHistory();
updateTime();
loadNotificationSettings();
loadTimeSettings();
loadNotificationState();

// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ intervals
setInterval(updateTime, 1000);
setInterval(updateGrowingTimers, 1000);
setInterval(checkNotifications, 3000);
checkNotifications();
setInterval(checkGrowingTemperatures, 5000); // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
checkGrowingTemperatures();
// Event Listeners ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤
document.addEventListener('DOMContentLoaded', function() {
    const harvestDaysSelect = document.getElementById('harvest-days');
    const harvestTimeSelect = document.getElementById('harvest-time');
    const fertilizerDaysSelect = document.getElementById('fertilizer-days');
    const fertilizerTimeSelect = document.getElementById('fertilizer-time');
    
    if (harvestDaysSelect) {
        harvestDaysSelect.addEventListener('change', updateExampleText);
    }
    if (harvestTimeSelect) {
        harvestTimeSelect.addEventListener('change', updateExampleText);
    }
    if (fertilizerDaysSelect) {
        fertilizerDaysSelect.addEventListener('change', updateExampleText);
    }
    if (fertilizerTimeSelect) {
        fertilizerTimeSelect.addEventListener('change', updateExampleText);
    }
});

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Blynk
console.log('üöÄ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Blynk...');
fetchBlynkData();

// ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ interval ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
setInterval(() => {
    if (!demoMode) {
        fetchBlynkData();
    }
}, 2000);
    </script>
</body>
</html>
